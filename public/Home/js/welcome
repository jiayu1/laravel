fml.define("component/iStorage",[],function(e,o){var t=!1,n=!1,i={cookieArr:{},options:{domain:".meilishuo.com",path:"/"},setCookie:function(e,o,t){t=t||{};var n=e+"="+encodeURIComponent(o);if(t.domain||(t.domain=this.options.domain),t.path||(t.path=this.options.path),n+="; domain="+t.domain,t.path&&(n+="; path="+t.path),t.duration){var i=new Date;i.setTime(i.getTime()+1e3*t.duration),n+="; expires="+i.toGMTString()}return t.secure&&(n+="; secure"),document.cookie=n+";"},getCookie:function(e,o){this.cookieArr[e]=this.cookieArr[e]||function(){"string"!=typeof e&&(e=e.toString());var o=window.document.cookie.match("(?:^|;)\\s*"+e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)");return o?decodeURIComponent(o[1]):void 0}();var t=this.cookieArr[e];return o?o(t):t},removeCookie:function(e){return this.setCookie(e,"",{duration:-1})}},s={set:function(e,o,t,n){t?sessionStorage.setItem(e,o):localStorage.setItem(e,o),"function"==typeof n&&n()},get:function(e,o,t){try{t(o?sessionStorage.getItem(e):localStorage.getItem(e))}catch(n){}},remove:function(e,o){o?sessionStorage.removeItem(e):localStorage.removeItem(e)}},r={flash:document.getElementById("storage"),sessionId:"",callback:[],init:function(e){if(e&&(this.sessionId=this.sessionId||i.getCookie("PHPSESSID")),!t&&!n){n=!0;var o=(new Date,document.createElement("div")),s='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="storage"';s+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="1" height="1">',s+='<param name="movie" value="http://i.meilishuo.net/css/images/window/storage1.swf" />',s+='<param name="quality" value="high" />',s+='<param name="allowScriptAccess" value="always" />',s+="</object>",o.innerHTML=s,document.body.appendChild(o),this.flash=document.getElementById("storage")}},detectIE:function(){var e=navigator.userAgent.toLowerCase();if(window.ActiveXObject){var o=e.match(/msie ([\d.]+)/)[1];if(o>=5.5&&o<8)return!0}return!1},set:function(e,o,n,i){function s(e,o,t){if(t){var n=new Date;n=parseInt(n.getTime()/36e5),r.flash.setSessionTime(n),r.flash.setSessionVal(r.sessionId+e,n),r.flash.set(r.sessionId+e,o)}else r.flash.set(e,o)}var r=this;r.init(n),t?(s(e,o,n),"function"==typeof i&&i()):r.callback.push(function(){s(e,o,n),"function"==typeof i&&i()})},get:function(e,o,n){function i(e,o){return o?(s.flash.removeAllSession(),s.flash.get(s.sessionId+e)):s.flash.get(e)}var s=this;s.init(o),t?n(i(e,o)):s.callback.push(function(){n(i(e,o))})},remove:function(e,o){var n=this;if(n.init(o),!t){var n=this;return void window.setTimeout(function(){n.remove(e,o)},100)}o?n.flash.remove(n.sessionId+e):n.flash.remove(e)}},a={set:function(e,o,t,n){t?i.setCookie(e,o):i.setCookie(e,o,{duration:15552e3}),"function"==typeof n&&n()},get:function(e,o,t){t(i.getCookie(e))},remove:function(e,o){i.removeCookie(e)}},c=r.detectIE()?function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return e?r:a}catch(o){return a}}():s;return{isJSReady:function(){return!0},getAllowDomain:function(){var e=e||["www.meilishuo.com","newlab.meilishuo.com","newtest.meilishuo.com","wwwtest.meilishuo.com","cdjdev.meilishuo.com","xhdev.meilishuo.com","rwdev.meilishuo.com","nanodev.meilishuo.com"];return e},flashReadyHandler:function(){t=!0;for(var e=0,o=r.callback.length;e<o;e++)r.callback[e]()},setCookie:function(e,o,t){return i.setCookie(e,o,t)},getCookie:function(e,o){return i.getCookie(e,o)},removeCookie:function(e){return i.removeCookie(e)},setSession:function(e,o,t){return c.set(e,o,!0,t)},getSession:function(e,o){return c.get(e,!0,o)},removeSession:function(e){return c.remove(e,!0)},set:function(e,o,t){return c.set(e,o,!1,t)},get:function(e,o){return c.get(e,!1,o)},remove:function(e){return c.remove(e,!1)}}});;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};fml.define("component/mce",[],function(t,o){var n=function(t){return"[object Array]"===Object.prototype.toString.call(t)};o.get=function(t){if(!t)throw Error("config cannot be null!");var o,e,r=t.id,a=n(r),i=!a&&"object"===("undefined"==typeof r?"undefined":_typeof(r)),f=t.type||(a||i?"/multiget/4":"/get/3"),u=t.dataType||"jsonp",p=t.params||{},y=[];if(i){a=!0,o={};for(var c in r)y.push(r[c]),o[r[c]]=c;r=y}return e="ajax"===u?"json":"jsonp",a?p.pids=r.join(","):p.pid=r,$.ajax({url:"//mce.meilishuo.com/"+u+f,dataType:e,data:p}).then(function(t){if(a){if(i){var n={},e=t.data||{};for(var r in o)n[o[r]]=e[r]&&e[r].list||[];return n}return t.data||{}}return t.data&&t.data.list||[]})}});;fml.define("component/waterfall",["common/showLog","component/shareTmp"],function(t,e){function i(t){return function(e){return e?e.sort(function(e,i){return t(e,i)||e.left-i.left})[0]:null}}function n(t,e){"string"==typeof e&&(e=e.split(y));try{e&&e.length&&e.forEach(function(e){t=t[e]})}catch(i){J("数据结构错误")}finally{return t}}function o(t,e){var i,n,o=e.helpers,a={};if(t&&t.length){for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);n=c,n.call(this,t,e,a),e.onLayoutFinished.call(this,e),e.useOptimise&&(e.hasMoved=!0,this.resetCurTop(),d.triggerHandler(e.touchMoveEventName))}}function a(t){return n(t,this._config._dataName)||[]}function r(t){if(d.height()-g-t<S)return!0}function c(t,e,i){var n,o,a,r,c,s,l,f=this.$el,h=e.tmpl,m=e.colWidth,d=e.useOptimise,p=e.colGapT,g=e.data.frame,x=e.isEqualHeight,v=e._boxHeight,y="",T=null,E=this._cols,L=this._colsHistory,F=L[g],b=this._boxes,k=[],N=0;if(F?E=F.map(function(t){return{min:t.min,max:t.min,left:t.left,frame:g}}):F=E.map(function(t){return{min:t.max,max:t.max,left:t.left,frame:g}}),t.forEach(function(t,n){i.v=t,i.index=n,i.totalIndex=e._totalIndex++,y+=u(h,i)}),f.append(n=_.html(y).children()),o=n.length,!y||!o)return J("没有获取到任何新的 DOM 节点, 请检查模板中是否正确处理了数据");if(n.each(function(t,i){var n,a;i.style.width=m+"px",x?(v||(v=e._boxHeight=i.offsetHeight),n=v):n=i.offsetHeight,T=W(E),W(F),a=T.max+"px",k.push({left:T.left,relativeTopStyle:a,top:T.max,width:m,height:n,index:t,el:i,boxLen:o,frame:g,state:d?e.isFirstFrame?w:G:w}),T.max+=n+p}),e.isFirstFrame=!1,L[g]||(L[g]=E.map(function(t,e){return{min:F[e].max,max:t.max,left:F[e].left,frame:g}})),k.forEach(function(t){var e=t.el;e.style.top=t.relativeTopStyle,e.style.left=t.left+"px",t.baseClass=e.className+=" waterfall-frame-"+g+" "+H,e.className+=" "+t.state}),s=k[0].top,e.isBiWaterfall){if(a=b.length){for(;N<a;){if(l=b[N],l.frame>g){c=N;break}N+=l.boxLen}c="undefined"==typeof c?a:c}else c=0;b.splice.apply(b,[c,0].concat(k))}else!b.length||b[b.length-1].top<=s?this._boxes=b.concat(k):this._boxes=k.concat(b);r=V(E).max,(!this._curTop||r>this._curTop)&&this.$el.height(this._curTop=r),this._cols=E.map(function(t,e){var i=this[e];return{min:t.min<i.min?t.min:i.min,max:t.max>i.max?t.max:i.max,left:t.left,frame:g}},this._cols)}function s(t){return t.checkTimes=1,function e(){setTimeout(function(){t.checkTimes++<B&&(t.initTopOffset=t.$el.offset().top,e())},M*t.checkTimes)}}function l(t){var e,i,n,o=t.colGap,a=4;if(o!==o)return console.error(o+" is not a valid number.");if("number"==typeof o)t.colGapT=t.colGapR=t.colGapB=t.colGapL=o;else{if(e=String(o).split(" "),i=e.length,0==i||i>4)return console.error(o+"'s format is not right.");for(;a--;)if(n=e[a],void 0!==n){if(isNaN(n=+n))return console.error(o+" contains invalid number.");e[a]=n}switch(i){case 1:t.colGapT=t.colGapR=t.colGapB=t.colGapL=e[0];break;case 2:t.colGapT=t.colGapB=e[0],t.colGapR=t.colGapL=e[1];break;case 3:t.colGapT=e[0],t.colGapR=t.colGapL=e[1],t.colGapB=e[2];break;case 4:t.colGapT=e[0],t.colGapR=e[1],t.colGapB=e[2],t.colGapL=e[3]}}}function f(t){this._config=t,this._currentAjax=null,this._id=x++,this._boxes=[],this._frames={loaded:{},cur:0,max:0,min:0},this.init()}t("common/showLog");var u=t("component/shareTmp"),h=document,m=window,d=$(h),p=$(m),g=p.height(),_=$("<div></div>"),x=1,v=!1,y=".",T="down",E="up",L=!1,F=!0,w="waterfall-optimise-show",G="waterfall-optimise-hide",b=function(){return F},k="waterfall-container",H="waterfall-box",N="NORMAL",C="REVERSE",O="$$AddExtraStyle",R={NORMAL:N,REVERSE:C,SHOW:w,HIDE:G,FORCE_CHECK:"waterfall-force-check",EVENT_CLEAR_BACKUP:"waterfall-clear-backup"},S=g/2,I="scroll.waterfall",D="touchmove.waterfall",A="touchend.waterfall",M=1e3,B=6,j=0,P={el:".goods-wall",tmpl:"posterWall",type:"get",dataType:"json",data:{offset:0,frame:0,trace:0,limit:10,endId:0},dataName:"tInfo",layoutDirection:N,colGap:8,hasSideGap:!1,isEqualHeight:!1,canFetch:r,dataHandler:o,dataFilter:a,onBeforeFetch:b,onFetchStart:b,onFetchFinished:b,onFetchSuccess:b,onFetchError:b,onLayoutFinished:b,onDataEmpty:b,optimise:null},W=i(function(t,e){return t.max-e.max}),V=i(function(t,e){return e.max-t.max}),q=i(function(t,e){return e.min-t.min}),K=[],U=0,z=0,J=function(){return m.console?function(t){console.log(t)}:b}();!function(){if(!m[O]){m[O]=!0;var t=$('<style id="waterfall-optimise-style">.'+w+"{display:block;}."+G+"{display:none;}."+k+"{position:relative;}."+H+"{position:absolute;}</style>").appendTo("head");try{t.append(h.createTextNode(""))}catch(e){}}}(),f.prototype={constructor:f,init:function(){var t,e,i,n,o,a,r=this._config,c=r.colNum,f=r.hasSideGap,u=0,h=0,m=0;if(n=this.$el=r.$el=$(r.el),1!==n.length)throw Error("el 参数指定的 DOM 元素"+(n.length?"存在多个":"不存在")+", 请仔细检查 el 值。");if(n.addClass(k),this._cols=o=[],this._colsHistory=[],r.initTopOffset=n.offset().top,r.isFirstFrame=!0,s(r)(),l(r),t=r.colGapL,e=r.colGapR,i=e,f&&(h=2*t),!c||c<=0)throw Error("请传入 colNum");for(a=r.colWidth=Math.floor((n.width()-h-(c-1)*i)/c);u<c;u++)0==u?m=f?t:0:m+=a+i,o.push({min:0,max:0,left:m,frame:0});(r.useOptimise=!!r.optimiseFn)&&(this.bindTouchmoveEvent(),r.optimiseFn.initRange(c))},bindTouchmoveEvent:function(){var t,e,i,n=this,o=n._config,a="."+n._id;t=o.touchMoveEventName=D+a,e=o.touchEndEventName=A+a,d.on(t,function(){o.hasMoved=!0,d.triggerHandler(e)}).on(e,function(){!n._isLock&&o.hasMoved&&o.optimiseFn.optimise(n._boxes,p.scrollTop()-o.initTopOffset),o.hasMoved=!1}),p.on(I,function(){clearTimeout(i),i=setTimeout(function(){o.optimiseFn.optimise(n._boxes,p.scrollTop()-o.initTopOffset)},30)})},fetch:function(t){function e(t,e){a.onFetchFinished.call(o,t,e),o._isLoading=!1}function i(t){var e=o._frames,i=r.frame,n=t;a.rawData=n,t=a.dataFilter.call(o,t),o._isLock||t&&t.length||(o.lock(),a.onDataEmpty.call(o,a)),!o._isLock&&n&&n.data&&n.data.endId&&(n.data.endId===-1?(o.lock(),a.onDataEmpty.call(o,a)):r.endId=n.data.endId),a.onFetchSuccess.call(o,t,a),a.dataHandler.call(o,t,a),e.loaded[r.frame]=1,e.max<i&&(e.max=i),e.min>i&&(e.min=i),a.layoutDirection==N?r.frame++:r.frame--,r.trace=t?t.trace||0:0}function n(t,e,i){o._isLoading=!1,a.onFetchError.call(o,i,e)}var o=this,a=o._config,r=a.data;if(!o._isLoading)return o._isLoading=!0,a.onBeforeFetch.call(o,a)===L?void(o._isLoading=!1):(o._config.onFetchStart.call(o,a),this.isFrameLoaded(a.data.frame)?void(o._isLoading=!1):t?void setTimeout(function(){e(null,200),i(t)},0):void(this._currentAjax=$.ajax({type:a.type,dataType:a.dataType,data:r,url:a.url,success:i,error:n,complete:e})))},start:function(t){return this.fetch(t),this},lock:function(){return this._isLock=!0,this},isLoading:function(){return this._isLoading},getColsInfo:function(){return $.extend(!0,[],this._cols)},getColsHistoryInfo:function(){return $.extend(!0,[],this._colsHistory)},setColsHistoryInfo:function(t){return this._colsHistory=$.extend(!0,[],t),this},setColsInfo:function(t){return t&&t.length&&(this._cols=$.extend(!0,[],t)),this},getParam:function(t){return this._config[t]},updateParam:function(t,e){return this._config[t]=e,this},increaseDataParam:function(t){var e=this._config.data,i=+e[t];isNaN(i)?e[t]=0:e[t]=i+1},getDataByPath:n,updateLayoutDirection:function(t){if(!(t in R))throw Error(t+" is not a valid direction.");return this._config.layoutDirection=t,this},findLowestCol:function(){return q(this._cols)},findHighestCol:function(){return V(this._cols)},isFrameLoaded:function(t){return!!this._frames.loaded[t]},getCurrentFrame:function(){return this._config.data.frame},unlock:function(){return this._isLock=!1,this},destroy:function(){for(var t=U;t--;)K[t]._id===this._id&&(this._currentAjax&&(this._currentAjax.abort(),this._currentAjax=null),K.splice(t,1),U--)},resetCurTop:function(){return this._boxes._curTop=-9999,this},triggerScroll:function(t){return p.triggerHandler(I,[t||T]),this}},p.on(I,function(t,e){var i,n,o;U&&(n=p.scrollTop(),n||v?v=!1:(v=!0,clearTimeout(j),j=setTimeout(function(){o=!0,p.trigger(I)},10)),i=e==T||e!=E&&n>=z,z=n,K.forEach(function(t){t._isLock||t._config.canFetch.call(t,n,i)===F&&(t.fetch(),o&&t.resetCurTop())}))}),e.CONS=R,e.init=function(t){var e,i,n,o,a;if(t=$.extend(!0,{_totalIndex:0},P,t),"string"==typeof t.dataName&&(t._dataName=t.dataName.split(".")),i=t.plugins){if(Array.isArray(i)&&(o=i.some(function(t,e){return t.takeOver&&(a=e,1)})))return n=t.plugins.splice(a,1)[0],n.init(t);if(i.takeOver)return delete t.plugins,i.init(t)}return K.push(e=new f(t)),U++,i&&i.forEach(function(t){t.init(e)}),e}});;fml.define("component/dialog",[],function(i,o){return{meiliDialog:function(i){var o={maskId:"maskLayer",dialogId:"dialogLayer",dialogTitle:"标题",dialogContent:"",showHeader:!0,dialogHeight:null,isOverflow:!0,isMaskLayer:!0,onClose:function(){},onStart:function(){}},d=$.browser.msie,e=$.extend({},o,i),n=function(){$("#"+e.maskId).remove(),$("#"+e.dialogId).remove(),$(document).bind("keyup",function(i){27==i.keyCode&&c()}),1==e.isMaskLayer&&t(),s(),e.onStart(e)},t=function(){var i=$('<div id="'+e.maskId+'" class="'+e.maskId+'"></div>');$("body").append(i);var o=$(document).width(),d=$(document).height();e.isOverflow?i.css({width:o+20,height:d}):(i.css({width:o,height:d}),$(window).bind("scroll",function(){o=$(document).width(),d=$(document).height(),i.css({width:o,height:d})}))},s=function(){var i="";e.showHeader&&(i='<div id="dialogTitle"><span class="closeDialog close_z"></span><span id="dialogTitleText">'+e.dialogTitle+"</span></div>");var o=$('<div id="'+e.dialogId+'" >'+i+'<div id="dialogContent" ></div></div>');$("body").append(o),$("#dialogContent").append(e.dialogContent).append('<div class="clear_f"></div>'),a(),l(),$(".closeDialog").click(function(){c()})},a=function(){var i=$("#"+e.dialogId),o=parseInt(i.css("padding-top"));if("fixed"==i.css("position")){var d=($(window).height()-i.height())/4-o,n=($(window).width()-i.width())/2-o;i.css({top:d,left:n})}else{var d=$(document).scrollTop()+($(window).height()-i.height())/3-o,n=$(document).scrollLeft()+($(window).width()-i.width())/2-o;d<0?d=20:d,i.css({top:d,left:n})}},l=function(){e.isOverflow?($("body").css("overflow","hidden"),d&&$("html").css("overflow","visible")):d?$(window).bind("scroll",function(){a($("#"+e.dialogId))}):$("#"+e.dialogId).css({position:"fixed"})},c=function(){$("."+e.maskId).remove(),$("#"+e.dialogId).remove(),$("body").css("overflow","auto"),d&&$("html").css({overflow:"auto","overflow-x":"hidden"}),e.onClose(e)};return n(),c}}});;fml.define("component/shareTmp",["core/etic"],function(e,c){var r=e("core/etic");return function(e,c){c=c||Object;try{var t=r(e,c)}catch(n){fml.debug(n)}return t}});;fml.define("component/lazyloadPic",["component/compressImg"],function(t,o){function a(){h&&u&&(clearTimeout(m),m=setTimeout(function(){var t=s.scrollTop();if(1===u)p[0].check(t);else for(var o=0;o<u;o++)p[o].check(t)},y))}function e(t){f[t]?f[t]++:f[t]=1}function n(t,o){this.init(t),o||(p.push(this),u+=1)}var r=t("component/compressImg"),i=window,l=document,s=$(i),c=s.height(),d=s.width(),h=!1,p=[],u=0,f={},m=-1,g=!0,y=20,v=5,z="lazyloaderover",T="lazyloadering",w="lazyload-placeholder",I="lazyload-img-start",k="lazyload-img-end",C="no-cdn-compress",S="resize",b="scroll.lazyload",_={bg:function(t,o){var a=new Image,n=this.opt,r=n.useAnimate,i=n.el;t.data(z,1).data(T,0),r&&t.addClass(I),i==="."+w&&t.removeClass(w),a.onload=a.onerror=function(r){r=r||window.event,a=null,"error"===r.type?(t.data(z,0),e(o)):t.css({"background-image":"url("+o+")","background-size":n.bgSize}).addClass(k)},f[o]>v?a=null:a.src=o},img:function x(t,o){var x=new Image,a=this.opt.el;x.title=t.attr("title"),x.alt=t.attr("alt"),x.onerror=function(){t.data(z,0),e(o)},(f[o]||0)<v&&(x.src=o,t.append(x)),t.data(z,1).data(T,0),a==="."+w&&t.removeClass(w)}};r.ready(function(){h=!0}),s.on(b,a).on(S,function(){c=s.height(),d=s.width()});var A={el:"."+w,attr:"src",auto:!0,stepX:40,stepY:40,loadStyle:"bg",bgSize:"cover",useAnimate:!0,root:""};n.prototype={constructor:n,init:function(t){if(this.opt=t=$.extend({},A,t),this._loader=_[t.loadStyle],!this._loader)throw Error('Do not support loadStyle:"'+t.loadStyle+'"');if(t.container&&$(t.container).on(b,a),t.root){var o=$(t.root);1==o.length&&(t.$root=o)}g&&(g=!1,requestAnimationFrame(function(){s.triggerHandler(b)}))},check:function(t){var o=this;requestAnimationFrame(function(){o._innerCheck(t)})},_innerCheck:function(t){if(h){var o=this.opt,a=o.el,e=o.stepX,n=o.stepY,r=o.$root,i=0,p=0,u=d,f=c,m=0;if(t||(t=s.scrollTop(),this.$$scrollTop=0),r){var g=r.offset(),y=r.width();i=g.left,u=Math.min(g.left+y,u)}for(this.$$scrollTop&&(this.$$scrollTop>t?f=Math.min(f,this.$$scrollTop-t):m=Math.max(m,f-(t-this.$$scrollTop))),this.$$scrollTop=t;i<=u;i+=e)for(p=m;p<=f;p+=n){var v,w=l.elementFromPoint(i,p);w&&(w.$$lazyloadImgType||(w.$$lazyloadImgType=1,v=$(w),1!=v.data(T)&&1!=v.data(z)?v.is(a)&&(v.data(T,1),this.load(v)):w.$$lazyloadImgType=2))}}},load:function(t){var o=this;t.hasClass(C)?this._loader(t,t.data(this.opt.attr)):r.ready(function(){o._loader(t,r.parseImgSrc(t.data(o.opt.attr),t))})},destroy:function(){var t=p.indexOf(this);t!==-1&&(p.splice(t,1),u--)}},o.init=function(t){return new n(t)},o.load=function(t,o){var a,e=$(t),r=new n(o,(!0)),i=r.opt.el;a=e.is(i)?e:e.find(r.opt.el),a.each(function(t,o){r.load($(o))})}});;fml.define("component/banner",[],function(e,i){!function(e){function i(e,i){var n=this;n.wrap=e,n.ul=n.wrap.find(i.ul),n.li=n.ul.find(i.li),n.len=n.li.length,n.liWidth=n.li.outerWidth(!0),n.liHeight=n.li.outerHeight(!0),n.numBox=n.wrap.find(i.numBox),n.prev=n.wrap.find(i.prev),n.next=n.wrap.find(i.next),n.isAuto=i.isAuto,n.lazyLoad=i.lazyLoad,n.imgSrc=i.imgSrc,n.displayNum=i.displayNum,n.cur=i.cur,n.evt=i.evt,n.effect=i.effect,n.speed=i.speed,n.autoTime=i.autoTime,n.index=i.index,n.numBoxB=null,n.timer=null,n.direction=null,n.step=null,n.dbclicks=!1,n.moveObj={},n.moveObj2={},n.prevIndex=0,n.init()}i.prototype={init:function(){var e=this;e.config(),e.autoPlay(),e.bind()},config:function(){var e=this;if(e.speed=e.speed>=e.autoTime?e.autoTime-100:e.speed,e.index<=0?e.index=0:e.index>=e.len&&(e.index=e.len-1),e.displayNum){e.numBox.empty();for(var i=0;i<e.len;i++)e.numBox.append("<b>"+(i+1)+"</b>")}if(e.numBoxB=e.numBox.children(),e.numBoxB.eq(e.index).addClass(e.cur),e.lazyLoad)for(var n=0;n<e.len;n++)e.li.eq(n).append("<div class='loading-cover'></div>");switch(e.lazyLoad&&e.loadImg(e.index),e.effect){case 0:e.li.hide().eq(e.index).show();break;case 1:e.direction="left",e.step=e.liWidth;break;case 2:e.direction="top",e.step=e.liHeight}0!=e.effect&&e.li.css(e.direction,e.step).eq(e.index).css(e.direction,0).addClass("prevIndexLi"),e.moveObj[e.direction]=0},move:function(){var e=this;if(!e.dbclicks)switch(e.prevIndex=e.wrap.find(".prevIndexLi").index(),0==arguments[0]?(e.index<e.len-1?e.index++:e.index=0,0!=e.effect&&(e.moveObj2[e.direction]=-e.step,e.li.eq(e.index).css(e.direction,e.step))):1==arguments[0]?(e.index<=0?e.index=e.len-1:e.index--,0!=e.effect&&(e.moveObj2[e.direction]=e.step,e.li.eq(e.index).css(e.direction,-e.step))):e.prevIndex<e.index?(e.moveObj2[e.direction]=-e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,e.step)):(e.moveObj2[e.direction]=e.step,0!=e.effect&&e.li.eq(e.index).css(e.direction,-e.step)),e.li.removeClass("prevIndexLi").eq(e.index).addClass("prevIndexLi"),e.effect){case 0:e.li.stop(!0,!0).fadeOut(e.speed).eq(e.index).fadeIn(e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur);break;case 1:case 2:e.li.eq(e.prevIndex).stop(!0,!0).animate(e.moveObj2,e.speed),e.li.eq(e.index).stop(!0,!0).animate(e.moveObj,e.speed,function(){e.dbclicks=!1,e.loadImg(e.index)}),e.numBoxB.removeClass(e.cur).eq(e.index).addClass(e.cur),e.index==e.len&&e.numBoxB.removeClass(e.cur).eq(0).addClass(e.cur)}},loadImg:function(e,i){var n=this;if(n.lazyLoad){var t=n.li.eq(e).find("img");if(t.attr(n.imgSrc)){var o=new Image;o.src=t.attr(n.imgSrc),o.onload=function(){t.attr("src",o.src),t.removeAttr(n.imgSrc),n.li.eq(e).find(".loading-cover").remove(),i&&"function"==typeof i&&i()}}}},autoPlay:function(){var e=this;clearInterval(e.timer),e.isAuto&&(e.timer=setInterval(function(){e.move(0)},e.autoTime))},hoverStop:function(e){var i=this;e.hover(function(){clearInterval(i.timer)},function(){i.autoPlay()})},bind:function(){var i=this;if(i.hoverStop(i.li),0==i.evt){i.prev.hide(),i.next.hide();var n;i.numBoxB.hover(function(){clearInterval(i.timer),e(this).hasClass(i.cur)||(i.index=i.numBoxB.index(this),n=setTimeout(function(){i.move()},200))},function(){clearTimeout(n),i.autoPlay()})}else 1==i.evt&&(i.hoverStop(i.numBoxB),i.hoverStop(i.prev),i.hoverStop(i.next),i.numBoxB.click(function(){e(this).hasClass(i.cur)||(i.index=i.numBoxB.index(this),i.move())}),i.prev.click(function(){i.move(1),i.dbclicks=!0}),i.next.click(function(){i.move(0),i.dbclicks=!0}))}},e.fn.imageSlide=function(n){var t=e.extend({},e.fn.imageSlide.defaults,n);this.each(function(){new i(e(this),t)})},e.fn.imageSlide.defaults={index:0,ul:"ul",li:"li",numBox:".num",prev:".prev",next:".next",cur:"cur",isAuto:!0,lazyLoad:!1,imgSrc:"data-src",displayNum:!0,evt:1,effect:1,speed:500,autoTime:5e3}}(jQuery)});;fml.define("component/compressImg",[],function(x,e){function t(x){var e=x.match(/(\d+)x(\d+).([a-zA-Z0-9]*)$/);return e&&e.length>0&&e[1]&&e[2]&&e[3]?{w:e[1],h:e[2],ext:e[3]}:null}function i(x){if(!x||x.indexOf(".webp")>0||x.indexOf(".gif")>0||x.indexOf(".jpg")<0&&x.indexOf(".png")<0||x.indexOf(".jpg_")>0||x.indexOf(".png_")>0)return x;if(x){var e=x.match(/\d+x\d+.[a-zA-Z0-9]*!/g);if(e&&e.length>0&&e.length<2){var t=x.match(/\.([a-zA-Z0-9]+)$/);if(t&&t.length)return x+"_999x999.v1c0.50"+t[0]}}return x}function n(x,e,t){var i=e.attr("suffix-model"),n="",r="."+x._imgQuality+".";switch("no"===e.attr("add-quality")&&(r="."),i){case"add_code":n=$.trim(e.attr("suffix-code"));break;case"orig_narrow":f.devicePixelRatio<2&&(n="50000x50000.v1c7E");break;case"goods_dpr":n=a(x,e);break;default:return t}if(e.attr("suffix-model","end"),!t||!n||t.indexOf(".webp")>0||t.indexOf(".gif")>0)return t;if(n="_"+n,t.indexOf(".jpg")<0&&t.indexOf(".png")<0)return t;if(t.indexOf(".jpg_")>0||t.indexOf(".png_")>0)return t;var d="",g=t.split(".");if("jpg"==g[g.length-1])d="jpg";else{if("png"!=g[g.length-1])return t;d="png"}return t+n+r+d}function r(x,e){var t="_999x999.v1c0.",i=x._bodyWidth,n="."+x._imgQuality+".";if(0<i&&i<=375?t="_375x999.v1c7E"+n:375<i&&i<=750?t="_750x999.v1c7E"+n:750<i&&i<=1125&&(t="_1125x9999.v1c7E"+n),!e||e.indexOf(".webp")>0||e.indexOf(".gif")>0)return e;if(e.indexOf(".jpg")<0&&e.indexOf(".png")<0)return e;var r="",a=e.split(".");if("jpg"==a[a.length-1])r="jpg";else{if("png"!=a[a.length-1])return e;r="png"}return e.indexOf(".png_")<0&&e.indexOf(".jpg_")<0&&e.indexOf("."+r)==e.length-4&&(e+=t+r),d&&e.indexOf(".jpg_")>0&&(a=e.split("."),"jpg"==a[a.length-1])?(a[a.length-1]="webp",a.join(".")):e}function a(x,e){var t="",i=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":t=e.attr("suffix-ratio");break;default:t=x._dprDefRatio,i=".v1c96"}var n=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*x._dpr;(!n||n<0||n>x._dprDefMaxWidth)&&(n=x._dprDefMaxWidth);for(var r=0;r<p.length;r++){var a=p[r];if(n<=a||a==x._dprDefMaxWidth)return l[a][t]+i}return!1}var f=window,d=!1,g=!1,o=[],u=f.devicePixelRatio>=1?f.devicePixelRatio:1,c={_imgQuality:70,_dpr:u,_bodyWidth:f.innerWidth*u,_dprDefMaxWidth:640,_dprDefRatio:"999"},p=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],l={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},s="js:is-support-webp";!function(){var x,e=function(){g=!0,o.forEach(function(x){x&&x()})};try{x=localStorage.getItem(s)}catch(t){fml.debug("获取 storage_key 失败")}if("string"==typeof x)return d="true"===x,void e();var i=new Image;i.onload=i.onerror=function(x){d="load"===x.type&&1===i.width;try{localStorage.setItem(s,d)}catch(x){fml.debug("设置 storage_key 失败")}e()},i.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}(),e.parseImgSrc=function(x,e){if(!x)return"about:blank";var a=t(x);return x.indexOf("mogucdn")===-1?x:(x=n(c,e,x),a&&a.w>750&&(x=i(x)),r(c,x))},e.ready=function(x){x&&(g?x():o.push(x))}});;fml.define("core/etic",[],function(e,n){function t(e,n,t){if(t&&checkTemplate(e,n),!r[e]){var c=document.getElementById(e).innerHTML;c=c.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join(";p.push('").split("\r").join("\\'");try{r[e]=new Function("","var p=[];p.push('"+c+"');return p.join('');")}catch(o){if(console){console.log(o);var l=c.replace(/^[ ]*\'\)|p.push\(\'[ ]*\'\)|p.push\(\'/g,"").replace(/^[ ]*;|;[ ]*$/g,"");console.log(o.message+"   :   "+l);var p=document.createElement("script");p.innerHTML=l;try{new Function("",l)}catch(o){}}}}var i=r[e];if(!n)return i;try{return i.apply(n)}catch(o){console&&(console.log(o),console.log(n))}}var r={};return t});;fml.define("common/showLog",[],function(t,n){function e(t){return"none"!=t.css("display")&&"hidden"!=t.css("visibility")&&0!=t.css("opacity")&&t.width()&&(t.height()||t.innerHeight&&t.innerHeight())}function s(t){var n=t.offset().top,s=t.height()||t.innerHeight&&t.innerHeight(),a=t.offset().left,i=t.width(),l=$(window).scrollTop(),o=$(window).scrollLeft(),h=$(window).width(),r=$(window).height(),d=n>=l&&n<l+r,g=n+s>l&&n+s<=l+r,c=n<l&&n+s>l+r,u=a>=o&&a<o+h,f=a+i>o&&a+i<=o+h,w=a<o&&a+i>o+h;return e(t)&&(d||g||c)&&(u||f||w)}function a(){if(x.length||_.length||H.length||A.length||y){var t=function(){_&&_.length?(T("0x00000000",{acms:_,indexs:v,type:5}),v=[],_=[]):H&&H.length?(T("0x00000000",{acms:H,indexs:p,type:5}),p=[],H=[]):A&&A.length?(T("70500",{acms:A,indexs:C,iids:b,type:4}),b=[],C=[],A=[]):y?(T(m||70500,y),y=null,m=null):x&&x.length&&(T(m||70500,{acms:x,iids:b,indexs:L}),x=[],b=[],L=[],m=null)};t()}i=!0,window.setTimeout(function(){x.length||_.length||H.length||A.length||y?a():i=!1},1e3)}var i=!1,l="rec-show-log",o="module_row",h="cube-acm-node",r="has-log-mod",d="show-log-item",g="log-custom",c="waiting-log",u="data-log-content",f="data-log-iid",w="data-log-index",m=($("."+l),null),v=[],p=[],C=[],x=[],y=null,_=[],H=[],A=[],b=[],L=[],T=function(t,n){var e=window&&window.logger&&window.logger.log;e&&e(t,n)},j=function(t){var n=t.attr(u),e=n.split(";");$(e).each(function(t,n){var e=n.split("="),s=e[0];s&&(y=y||{},y[s]=y[s]||[],y[s].push(n.replace(s+"=","")))})},k=function(){$("."+o).each(function(t,n){var e=$(n),a=e.attr("data-acm")||"",i=a.split(".");if(a&&s(e)){var l=e.find("."+h+",.anchor"),o=l.length;e.hasClass(r)||(_.push(a+"-mfs_"+o),v.push(t),e.addClass(r)),o&&$(l).each(function(t,n){var e=$(n),l=!e.hasClass(g)&&e.attr("data-log-content")||"",h=e.attr(f)||"";!e.hasClass(r)&&s(e)&&(l&&i[6]?(A.push(l+"-"+i[6]+"-idx_"+t+"-mfs_"+o),C.push(t),h&&b.push(h),e.addClass(r)):(H.push(a+"-idx_"+t+"-mfs_"+o),p.push(t),e.addClass(r)))})}}),$("."+l).each(function(t,n){if(s($(n))||$(n).hasClass(c)){var e=$(n).find("."+d);$(n).removeClass(c),e.length?$(e).each(function(t,e){var a=$(e);if(s(a)||a.hasClass(c)){if(a.removeClass(c),m&&m!==$(n).data("eventid"))return $(n).addClass(c),void a.addClass(c);a.hasClass(g)?j(a):(null!==a.attr(w)&&""!==a.attr(w)&&void 0!==a.attr(w)&&L.push(a.attr(w)),a.attr(u)&&x.push(a.attr(u)),a.attr(f)&&b.push(a.attr(f))),m=$(n).data("eventid"),a.removeClass(g).removeClass(d).removeAttr(u).removeAttr(f).removeAttr(w)}}):$(n).removeClass(l)}}),(x.length||_.length||H.length||A.length||y)&&!i&&a()},q=function(){$(window).scroll(k),$(window).trigger("scroll")};q(),n.log=k});;fml.define("common/nav",[],function(t,a){var i=$(".sec_attr .list");$(".nav_list");i.hover(function(){var t=$(this).children(".nav_list");0!=t.length&&(i.removeClass("active"),$(this).addClass("active"),t.show())},function(){i.removeClass("active"),$(this).removeClass("active"),$(this).children(".nav_list").hide()});var e=i.length;i.each(function(t){t==e-1&&$(this).addClass("last")});var n=$(".attr_box");"welcome"==Meilishuo.config.controller?n.css("display","block"):$(".all , .attr_box").hover(function(){n.stop(!0,!0).slideDown()},function(t){t.stopPropagation(),n.find(".nav_list").hide(),n.stop(!0,!0).slideUp()});var s=$(".nav_tab"),l=s.find("a"),o={"/welcome":l.eq(0).html(),"/select":l.eq(1).html()},c="",h=location.pathname;$.each(o,function(t,a){if(0==h.indexOf(t))return c=o[t],!1}),"/"==h&&(c="首页"),s.each(function(){var t=$(this).find("a").html();c==t&&$(this).find("a").addClass("active")})});;fml.define("common/search",[],function(t,a){function e(t){t=t.list;for(var a="",e=0;e<t.length;e++){var n=t[e];a+='<a target="_blank" href="http://www.meilishuo.com/search/goods/?page=1&searchKey='+encodeURIComponent(n.word)+'" style="color:'+n.color+'">'+n.word+"</a >"}u.html(a)}function n(t){t&&t.list&&t.list.length&&(t=t.list[0],h.attr({placeholder:t.placehold,"data-placeholder":t.placehold,"data-key":t.word}))}function o(){$.ajax({url:"http://mce.mogucdn.com/jsonp/multiget/3?pids=5604,5571",dataType:"jsonp"}).then(function(t){t.success&&(e(t.data[5571]),n(t.data[5604]))})}function i(){var t=/(?:&|\?)searchKey=([^&]+)/.exec(location.search);t&&t[1]&&h.val(decodeURI(t[1]));var a=/(?:&|\?)filter=([^&]+)/.exec(location.search);a=a&&a[1],"shop"==a&&c(f.find("span")[1])}function c(t){$(t).is("span")&&(f.find("span").removeClass("active"),$(t).addClass("active"),v=$(t).index(),h.attr("placeholder",0==v?h.attr("data-placeholder"):""))}function l(){if(0==v){var t=$.trim($(this).val());if(t){if(y.lastVal==t)return void m.show();y.lastVal=t,y.cache[v]=y.cache[v]||{};var a=y.cache[v];clearTimeout(y.delayId),y.delayId=setTimeout(function(){a[t]?y.render(a[t]):$.ajax({url:y.url,data:{pid:"17721",p_keyWord:t,row:10},dataType:"jsonp"}).then(function(e){a[t]=e,y.render(a[t])})},y.delayTime)}}}function r(t){var a=$(".active",m).removeClass("active");a.length?"up"==t?(a=a.prev(),a.length||(a=m.find(".item").last())):(a=a.next(),a.length||(a=m.find(".item").first())):a=m.find(".item").first(),a.addClass("active"),h.val(a.attr("data-title"))}function s(t,a){if(t=0==v?$.trim(t)||$.trim(h.attr("data-key")):$.trim(t)){var e;e=0!=v?"http://www.meilishuo.com/search/shop/"+encodeURIComponent(t)+"?filter=shop":"http://www.meilishuo.com/search/goods/?page=1&searchKey="+encodeURIComponent(t)+(a?"&acm="+a:""),location.href=e}}function d(){i(),o(),f.click(function(t){c(t.target)}),g?h.on("input",function(){l.call(this)}):h.on("propertychange",function(){l.call(this)}),h.on("blur",function(){setTimeout(function(){m.hide()},250)}).on("focus",function(){l.call(this)}).on("keyup",function(t){var a=t.keyCode;if(38==a||40==a){var e=38==a?"up":"down";r(e)}else 13==a&&s(this.value,m.find(".active").data("acm"))}),m.on("mouseover",function(t){$(".item",this).removeClass("active"),$(t.target).closest(".item").addClass("active")}).on("click",function(t){var a=m.find(".active"),e=a.attr("data-title"),n=a.data("acm"),o=t.target;"span"==o.tagName.toLowerCase()?s(e+" "+$(o).text(),n):s(e,n)}),p.on("click",function(){s(h.val())})}var h=$(".search-txt"),u=$(".hotword"),f=$(".search-tab"),m=$(".suggest-box"),p=$(".search-btn"),v=0,g="oninput"in document,y={lastVal:null,delayId:null,cache:{},url:"http://rec.mogujie.com/jsonp/recommend/1",delayTime:500,render:function(t){if(t&&t.success&&t.data&&t.data.data){for(var a=t.data.data,e="",n=0;n<a.length;n++){for(var o=a[n],i=o.tags||[],c="",l=0;l<i.length;l++)c+="<span>"+i[l].tag+"</span>";e+='<div class="item" data-title="'+o.query+'" data-acm="'+o.acm+'">'+o.query+'<div class="tags">'+c+"</div></div>"}m.html(e).show()}else m.hide()}};d()});;fml.define("common/adBanner",[],function(a,e){$.ajax({url:"http://mce.meilishuo.com/jsonp/get/3?pid=12556",dataType:"jsonp"}).done(function(a){var e=a&&a.data&&a.data.list&&a.data.list[0];e&&e.image&&e.link&&$('<a id="global-top-headline" href="'+e.link+'"><image src="'+e.image+'"></image></a>').insertAfter("#M_PC_top_nav")})});;fml.define("common/polyfill",[],function(n,t){Date.now||(Date.now=function(){return(new Date).getTime()});for(var e=["webkit","moz"],o=0;o<e.length&&!window.requestAnimationFrame;++o){var r=e[o];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(n){var t=Date.now(),e=Math.max(i+16,t);return setTimeout(function(){n(i=e)},e-t)},window.cancelAnimationFrame=clearTimeout}Array.prototype.forEach||(Array.prototype.forEach=function(n,t){var e,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof n)throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),o=0;o<i;){var a;o in r&&(a=r[o],n.call(e,a,o,r)),o++}}),Array.prototype.map||(Array.prototype.map=function(n,t){var e,o,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("[object Function]"!=Object.prototype.toString.call(n))throw new TypeError(n+" is not a function");for(t&&(e=t),o=new Array(a),r=0;r<a;){var w,m;r in i&&(w=i[r],m=n.call(e,w,r,i),o[r]=m),r++}return o})});;fml.define("base",["common/polyfill","common/adBanner","common/search","common/nav"],function(o,m){o("common/polyfill"),o("common/adBanner"),o("common/search"),o("common/nav")});;fml.define("page/welcome",["component/banner","component/lazyloadPic","component/shareTmp","component/dialog","component/waterfall","component/mce","component/iStorage"],function(t,n){function o(){var t="http://s.meilishuo.com/1172jnw8/list/index?categoryId=20160580",n="http://s2.mogucdn.com/mlcdn/c45406/170329_407g0k6lce0b3h78ddjg9dd39eh33_2400x800.jpg",o="美丽优选T裇",e=w.find("li").length;e>1?w.imageSlide({evt:1,effect:1,autoTime:3e3}):e||w.find(".banner").append('<li class="data-ptp-item " data-ptp-customc="indexbanner_mls_ _'+o+'" ><a class="pic lazyload-placeholder no-cdn-compress" name="'+o+'" href="'+t+'" target="_blank" data-src="'+n+'"></a></li>')}function e(t){v.show(),v.find(".js-act-fix-left-banner").html('<a href="'+t[0].link+'" target="_blank"><img src="'+t[0].image+'" /></a>');var n=v.find(".act_left_box");n.css("top",g.height()-(n.height()+20)),v.find(".left_ad_close").on("click",function(){n.hide()})}function a(t){t=t.slice(0,6),$("#pop").show().find(".js-list").html(r("tmpl-pop",t))}function i(t){var n=u.getCookie(j);n||setTimeout(function(){var n=r("tmpl-promotion-ad",{promotion:t});m.meiliDialog({showHeader:!1,dialogContent:n,onClose:function(){u.setCookie(j,"show",{duration:k})}})},1e3)}function c(){function t(t){var o=a[t];if(n!==o&&(n&&(n.$link.removeClass(b),n.$content.hide()),n=o,n.$link.addClass(b),n.$content.show(),!o.isLoading)){if(o.isLoaded)return n&&n.$content.hide(),void o.$content.show();o.isLoading=!0,o.$content.addClass(c),$.ajax({url:i,dataType:"jsonp",data:{type:o.type,offset:0,limit:20}}).done(function(t){var n;n=t&&t.data&&t.data.rows?t.data.rows.slice(0,10):{empty:!0},o.isLoaded=!0,o.isLoading=!1,o.$content.removeClass(c).html(r("tmpl-top-goods",{list:n})),_.check();var a=o.$content.height();e.height()<a&&e.height(a)})}}var n,o=$("#top-goods"),e=o.find(".content-wrap"),a={today:{type:"mrsx",$link:o.find('[data-type="today"]'),$content:o.find(".js-top-goods-today")},week:{type:"yzrx",$link:o.find('[data-type="week"]'),$content:o.find(".js-top-goods-week")}},i="http://simba-api.meilishuo.com/mlselection/top/v1/topGoodsList/h5",c="loading";t("today"),o.find(".js-link").on("click",function(){t($(this).data("type"))})}function d(){var t="http://simba-api.meilishuo.com/venus/topic/v2/queryTopicList/pc";$.ajax({url:t,dataType:"jsonp"}).then(function(t){var n=$("#select");n.show().find(".js-content").html(r("tmpl-select",t.data.slice(0,3)))})}function l(){h.get({id:"26489"}).then(function(t){t&&t.forEach(function(t){y>=1e3*t.stime&&y<=1e3*t.etime&&(x=t.pid)}),x&&(T.show(),s().start())})}function s(){var t=1,n={pid:x,page:t},o=f.init({el:".js-wall",tmpl:"tmpl-waterfall",url:"http://mce.meilishuo.com/jsonp/get/3",dataType:"jsonp",colNum:5,colGap:"20 20 0 0",hasSideGap:!0,isEqualHeight:!0,data:n,dataFilter:function(n){t+=1,this._config.data.page=t;var o="data.list".split(".");return o.forEach(function(t){n=n[t]}),n},onFetchSuccess:function(){o.getParam("rawData").data.isEnd&&(A.attr("status","stop").hide(),this.lock())},onFetchFinished:function(t,n){"success"==n&&p.load(".beauty_poster")}});return o}t("component/banner");var p=t("component/lazyloadPic"),r=t("component/shareTmp"),m=t("component/dialog"),f=t("component/waterfall"),h=t("component/mce"),u=t("component/iStorage"),g=$(window),w=$("#banner"),v=$("#global-act-left"),y=+$(".top-wrap").data("now"),b="active",k=345600,j="index-ad-last-showed-time",_=p.init({root:".top-wrap"});p.load("#banner"),p.load(".channels",{bgSize:"contain"});var x,T=$("#beauty"),A=T.find(".pullUp"),C=w.find("a");C.on("click",function(){var t=$(this),n={url:t.attr("href"),refer:document.referrer,index:C.index(t),bannerid:"",bannername:t.attr("name")};logger&&logger.log("000815001",n)}),o(),c(),d(),l(),h.get({id:{leftAd:"15477",pop:"39800",promotionAd:"15476"}}).then(function(t){t.leftAd&&t.leftAd.length&&e(t.leftAd),t.pop&&t.pop.length&&a(t.pop),t.promotionAd&&t.promotionAd.length&&i(t.promotionAd)})});;