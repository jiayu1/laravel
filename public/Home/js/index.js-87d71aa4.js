!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("mls-pc/pages/normal/index",[],e):"object"==typeof exports?exports["mls-pc/pages/normal/index"]=e():t["mls-pc/pages/normal/index"]=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";i(1),i(2),i(7);var n=window.M&&M.MWP||MoGu&&MoGu.MWP||window.MWP||null,a=!1,s=function(){a?($("#J_ModuleRepeat").css("margin-top","0"),console.info("\u5916\u8fb9\u8ddd\u6e05\u9664"),setTimeout(function(){console.info("\u5ef6\u65f6\u5916\u8fb9\u8ddd\u6e05\u9664"),$("#J_ModuleRepeat").css("margin-top","0")},1e3)):($(".user-info").show(),$("#J_SearchInShop").show(),$(".mod_topNav").show(),$("#J_ModuleShop").show(),$("#J_ModuleClassify").show())};n&&n.request("mwp.darwin.get","3",{pid:27718}).then(function(t){if(t.ret===n.Code.Success&&respond.data.list[0]&&"0"==respond.data.list[0].showShopInfo&&respond.data.list[0].shopIds){var e=respond.data.list[0].shopIds.split(",");$(e).each(function(t,e){e==$("#shopId").val()&&(a=!0)})}console.info(1),s()})["catch"](function(){var t=27718;$.ajax({url:"http://mcebackup.mogucdn.com/jsonp/get/3%3Fpid="+t+"%26callback=jsonp"+t+"backup",type:"get",dataType:"jsonp",jsonpCallback:"jsonp"+t+"backup",data:{pid:27718}}).done(function(t){if(t.success&&"SUCCESS"==t.returnCode&&t.data.list[0]&&"0"==t.data.list[0].showShopInfo&&t.data.list[0].shopIds){var e=t.data.list[0].shopIds.split(",");$(e).each(function(t,e){e==$("#shopId").val()&&(a=!0)})}console.info(1),s()}).fail(function(){s()})}),console.log("normal/index");var o=i(8),r=i(20);if(o.init(),r.init(),"\u7f8e\u4e3d\u4f18\u9009"==$(".name-wrap a").html()||"\u6211\u7684\u5fc3\u613f\u662f\u4e16\u754c\u548c\u5e73"==$(".name-wrap a").html()){var l=function(t){t.success&&($(".words-left").html(t.data.title),"2"==t.data.type||(t.data.url?($("#liangzhao .title").attr("src",t.data.url),$("#liangzhao").show()):($("#liangzhao .title").attr("src","http://s2.mogucdn.com/p2/170209/1_20g49454ii008l8b43jagll6b5k88_363x302.png"),$("#liangzhao").show())),$("#liangzhao .panel-title").click(function(){$("#liangzhao .img-box").hasClass("show")?$("#liangzhao .img-box").removeClass("show"):$("#liangzhao .img-box").addClass("show")}))};$.ajax({url:"http://event.meilishuo.com/provider/certificate?itemId="+$("#iteminfoid").val(),method:"GET",dataType:"jsonp",cache:!0,success:l})}},function(t,e){"use strict";window.console&&console.log("\u6b22\u8fce\u8bbf\u95ee\u7f8e\u4e3d\u8bf4\u8be6\u60c5\u9875!x22")},function(t,e,i){"use strict";i(3),i(6)},function(t,e,i){"use strict";var n=i(4);!function(t){var e=t(document),i=t("#shopBaseUrl").val();t("#shopBaseUrlSec").length>0&&""!=t("#shopBaseUrlSec").val()&&(i=t("#shopBaseUrlSec").val());var a=(t(".J-shop-follow").data("shopid"),a||{}),s=t(".J-shop-follow");a.domEvent=function(){var a=function(){if(t(".shop-header .user-info .shop-info-content").length||t(".shop-header .user-info").hasClass("hover"))return t(".shop-header .user-info").addClass("hover"),!1;var e=['<div class="shop-info-content clearfix">','<div class="info-box fl">','<ol class="li li3">',"{{? it.shopInfo && it.shopInfo.area }}",'<li><span class="tag">\u6240\u5728\u5730\u533a\uff1a</span>{{=it.shopInfo.area}}</li>',"{{?}}",'<li><span class="tag">\u5546\u54c1\u6570\uff1a</span>{{=it.goodsTotal}}</li>','<li><span class="tag">\u6536\u85cf\u6570\uff1a</span>{{=it.shopFansTotal}}</li>','{{?it.shopSaleTotal != "hidden"}}','<li><span class="tag">\u9500\u552e\u91cf\uff1a</span>{{=it.shopSaleTotal}}</li>',"{{?}}",'<li><span class="tag">\u521b\u5efa\u65f6\u95f4\uff1a</span>{{=it.shopInfo.enterTimeData}}</li>','{{?it.deposit != "hidden" && it.deposit > 0}}','<li><span class="tag">\u5e97\u94fa\u4fdd\u8bc1\u91d1\uff1a</span>\u5df2\u7f34\u7eb3</li>',"{{?}}","{{?it.identify && it.identify.shopType == 1}}",'<li><img class="shop-individual-licen" src="{{=it.identify.idenImg}}" alt="" /></li>',"{{??it.identify && it.identify.shopType == 2}}",'<li class="company-info clearfix"><span class="tag">\u516c\u53f8\u540d\uff1a</span><div class="c-name">{{=it.identify.companyName}}</div></li>','<li><span class="tag">\u5de5\u5546\u6267\u7167\uff1a</span><a class="shop-company-licen" href="{{=it.identify.companyLicense}}" target="_blank"><img src="{{=it.identify.idenImg}}" alt="" /></a></li>','{{?it.identify.foodIcon && it.identify.foodImg}}<li><span class="tag" style="width:120px">\u98df\u54c1\u7ecf\u8425\u8bb8\u53ef\u8bc1\uff1a</span><a class="shop-company-licen" href="{{=it.identify.foodImg}}" target="_blank"><img src="{{=it.identify.foodIcon}}" alt="" /></a></li>{{?}}',"{{?}}","</ol>","</div>",'<ol class="li li1">','<li class="title">\u52a8\u6001\u8bc4\u5206</li>',"{{ $.each(it.dsrArr, function(index, dsrArr){ }}",'<li>{{=dsrArr}}\uff1a<span {{?it.dsr["pkDsr"][index] == 1}} class="num" {{??}}class="low"{{?}}>',"{{=it.dsr.shopDsr[index]}}","</span></li>","{{});}}","</ol>",'<ol class="li li2">','<li class="title">\u6bd4\u540c\u884c\u5e73\u5747</li>',"{{ $.each(it.dsrArr, function(index, dsrArr){ }}",'{{?it.dsr["pkDsr"][index] == 1}}','<li><span class="tag up">\u9ad8</span><span class="num">{{=it.dsr["exAverageDsr"][index]}}</span></li>',"{{??}}",'<li><span class="tag down">\u4f4e</span><span class="num">{{=it.dsr["exAverageDsr"][index]}}</span></li>',"{{?}}","{{});}}","</ol>",'<ol class="li li4">','<li class="title"> \u672c\u5e97 </li>','<li>\u5e73\u5747\u53d1\u8d27\u65f6\u95f4\uff1a<span {{if(it.dsr["service"]["shopShip"] > it.dsr["service"]["averageShip"]){}}class="low" {{}else{}}class="num"{{}}} >{{=it.dsr["service"]["shopShip"]}}</span>\u5929</li>',"</ol>",'<ol class="li li5">','<li class="title"> \u884c\u4e1a </li>','<li>{{=it.dsr["service"]["averageShip"]}} \u5929</li>',"</ol>","</div>"].join(""),i={shopId:t("#shopId").val(),shopType:"mlspc"};t.ajax({url:"http://shopapi.mogujie.com/jsonp/shopDetail/1",type:"get",dataType:"jsonp",jsonp:"callback",data:{data:JSON.stringify(i)},success:function(i){var n="<div class='no-result'>\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e...</div>";if(i.success){var a=i.data;a.dsrArr={desc:"\u63cf\u8ff0\u76f8\u7b26",quality:"\u8d28\u91cf\u6ee1\u610f",price:"\u4ef7\u683c\u5408\u7406",service:"\u670d\u52a1\u5468\u5230"},n=MoGu.ui.getTemplate(e,a)}t(".shop-header .shop-info").html(n)}}),t(".shop-header .user-info").addClass("hover")},o=function(){e.on("click",".J-shop-follow",function(){var e=t(this),a=0,o=t(this).data("shopid");e.hasClass("shop-followed")&&(a=1);var r="";r="http://favorite.meilishuo.com/jsonp/collectShop/1";var l={callback:function(){e.trigger("click")}};n.isLogin(l)&&t.ajax({url:r,type:"get",dataType:"jsonp",data:{shopId:o}}).done(function(o){if(1001==o.returnCode)if(0==a){if(s.addClass("shop-followed").text("\u5df2\u6536\u85cf"),e.data("pid")){var r=e.data("pid");t(".shop-name .mogutalk_widget_btn").data("bid").split("#")[0];t.ajax({url:i+"/index/getPromotion",data:{pid:r},type:"post",dataType:"json",success:function(e){if(1001===e.status.code){var i=['<div class="popBox" style="position: fixed; top: 50%;left: 50%;margin-left: -319px;margin-top: -191px;width: 638px;height: 382px;z-index: 111;background: #fff;">','<a href="javascript:;" class="btn_close" style="position: absolute;top: 0;right: 0;width: 50px;height: 50px;"></a>','<img src="http://s8.mogucdn.com/pic/141202/13t2zv_ieydmm3fgeywcmdfmqytambqmmyde_638x382.jpg" alt="" />','<a target="_blank" href="http://www.mogujie.com/trade/promotion/user/shopcoupon" class="btn_view" style="position: absolute;bottom: 75px;left: 152px;width: 335px;height: 65px;"></a>',"</div>"].join("");t("body").append(i),t(".popBox").on("click",".btn_close",function(){t(".popBox").remove()})}else t.alert(e.result.error)},error:function(){t.alert("\u9886\u53d6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!")}})}}else s.removeClass("shop-followed").text("\u6536\u85cf");else 10022==o.returnCode?n.goToLogin():alert(o.msg)})}).off("mouseover mouseleave").on({mouseover:function(){a()},mouseleave:function(){t(".shop-header .user-info").removeClass("hover")}},".J-show-shop-score").on("click",".J_coupon_apply",function(){t(this);t.ajax({url:i+"/index/getPromotion",type:"post",dataType:"json",data:{pid:t(this).attr("data-id")}}).done(function(e){1001==e.status.code?t.alert("\u9886\u53d6\u6210\u529f"):1022==e.status.code?n.goToLogin():t.alert(e.result.error)})}).on("mouseenter mouseleave",".J_QrcodeSlide",function(e){var n=t(".J_QrcodeSlideContainer"),a=t(".J_QrcodeContainer");if(e=e||window.event,"mouseleave"===e.type)return void a.hide();if(a.show(),!(n.html().toLowerCase().indexOf("<div")>-1)){if(!i||""==i)return void a.hide();var s=t("#shopbaseurl").val();/\.com$/.test(s)&&(s+="/");var o=t("#shoplogo"),r=o.val(),l=/^http:/.test(r);l||(r="http://s7.mogucdn.com"+r),o.length>0&&/(gif|jpeg|jpg|png)$/i.test(o.val())&&a.find(".qrcode-icon").css("background-image","url("+r+")"),n.qrcode({render:"div",text:s,size:120,ecLevel:"M"})}}).on("click",".J_QrcodeSlide",function(){var e=t(".J_QrcodeSlideContainer"),i=t(".J_QrcodeContainer");e.html().indexOf("<div")>-1&&i.toggle()}).on("click","#J_SearchInShop",function(){var e=t(this).data("baseurl"),i=t.trim(t("#J_SearchKey").val());if(""!=i){t("#J_SearchInShopForm").remove();var a=t("<form>");a.attr({id:"J_SearchInShopForm",target:"_blank",action:n.getUrlWithPtp(e+"/search/index"),method:"GET"}).html('<input type="hidden" name="q" class="search-key" value="'+i+'" />'),t("body").append(a),a[0].submit()}}),t(".J_QrcodeSlide").trigger("mouseover"),setTimeout(function(){t(".J_QrcodeSlide").trigger("mouseleave")},3e3)};return{init:o}}(),a.domRender=function(){var e=function(){if(t(".J_msg").length>0&&t(".J_msg").attr("data-bid",t("#shopid").val()),t(".back2top_wrap").find(".go_top").length>0){var e=['<div class="ext_module qrcode J_QrcodeSlide" href="javascript:;">','<div class="qrcode-container J_QrcodeContainer"><div class="qrcode-node J_QrcodeSlideContainer"><b class="qrcode-icon"></b></div><span class="tip">\u626b\u63cf\u8fdb\u5165\u624b\u673a\u5e97\u94fa</span></div></div>'].join("");t(".back2top_wrap").find(".go_top").before(e),t(".J_QrcodeSlide").show()}};return{init:e}}(),t(function(){a.domRender.init(),a.domEvent.init()})}(jQuery)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,BASE=__webpack_require__(5);__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.__CUtil=window.__CUtil||{_getPageType:function(){return this.__pagetype||(this.__pagetype=$("#J_PageType").val()),this.__pagetype},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},getFormatDate:function(t,e){var i=function(t){return t+="",t.replace(/^(\d)$/,"0$1")},n={yyyy:t.getFullYear(),yy:t.getFullYear().toString().substring(2),M:t.getMonth()+1,MM:i(t.getMonth()+1),d:t.getDate(),dd:i(t.getDate()),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};return e||(e="yyyy-MM-dd hh:mm:ss"),e.replace(/([a-z])(\1)*/gi,function(t){return n[t]})},getIsNone:function(){return 1==this.getQueryString("__none")},getIsDebug:function(){return 1==this.getQueryString("__debug")},getIsScreen:function(){return 1==this.getQueryString("__screen")},getIsWebDemo:function(){return/webdemo\.com/.test(location.host)},getPageTypeIsItem:function(){return console.log(this._getPageType(),"item"),"item"==this._getPageType()},getPageTypeIsRush:function(){return"rush"==this._getPageType()},getPageTypeIsSeckill:function(){return"seckill"==this._getPageType()},getShopId:function(){return this.__shopId||(this.__shopId=this.getQueryString("__shopId"),this.__shopId=this.__shopId||$("#J_ShopId").val()),this.__shopId},getItemId:function(){return this.__itemId||(this.__itemId=this.getQueryString("__itemId"),this.__itemId=this.__itemId||$("#J_ItemId").val()),this.__itemId},getSellerId:function(){return this.__sellerId||(this.__sellerId=this.getQueryString("__sellerId"),this.__sellerId=this.__sellerId||$("#J_SellerId").val()),this.__sellerId},getRushId:function(){return this.__rushid||(this.__rushid=this.getQueryString("__rushid"),this.__rushid=this.__rushid||$("#J_RushId").val()),this.__rushid},getSeckillId:function(){return this.__seckillid||(this.__seckillid=this.getQueryString("__seckillid"),this.__seckillid=this.__seckillid||$("#J_SeckillId").val()),this.__seckillid},getRushData:function getRushData(){if(!this.__rushData){var rushData=$.trim($("#J_RushData").val());this.__rushData=eval("("+decodeURIComponent(rushData)+")")}return this.__rushData},getPreSaleRulesData:function getPreSaleRulesData(){if(!this.__preSaleRulesData){var preSaleRulesData=$.trim($("#J_PreSaleRulesData").val());this.__preSaleRulesData=preSaleRulesData?eval("("+preSaleRulesData+")"):{}}return this.__preSaleRulesData},getIsShowCartLuckyDrawTips:function(){return detailInfo.redPacketsSwitch},getCartLuckyDrawData:function(){return this.__cartLuckyDrawData||(this.__cartLuckyDrawData=$("#J_CartLuckyDrawData").data()||{}),this.__cartLuckyDrawData},getUserId:function(){return detailInfo.loginUserId||""},getLoginResult:function(){return console.log(detailInfo),detailInfo.isLogin},isLogin:function(t){return detailInfo.isLogin?!0:(this.goToLogin(),!1)},goToLogin:function(){return this.getQueryString("__stoplogin")?(window.console&&console.log("\u51c6\u5907\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762\uff0c\u4f46\u662f\uff0c\u4f46\u662f\u88ab\u963b\u6b62\u4e86~~~"),!1):void(location.href=this.getUrlWithPtp("http://www.meilishuo.com/user/login"))},goToTabPosition:function(t){0!=t.length&&$("html, body").scrollTop(function(){return t.offset().top-59})},cartAfterForLuckyDraw:function(){$("#J_BuyCart:visible").trigger("cartluckydraw")},formatTimeStamp:function(t,e){var i=new Date(1e3*parseInt(t));return this.formatDate(i,e)},formatDate:function(t,e){var i=function(t){return t+="",t.replace(/^(\d)$/,"0$1")},n={yyyy:t.getFullYear(),yy:t.getFullYear().toString().substring(2),M:t.getMonth()+1,MM:i(t.getMonth()+1),d:t.getDate(),dd:i(t.getDate()),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};return e||(e="yyyy-MM-dd hh:mm:ss"),e.replace(/([a-z])(\1)*/gi,function(t){return n[t]})},getImgThumbnailUrl:function(t,e,i){return BASE.getImgThumbnailUrl(t,e,i)},getImgSize:function(t,e){return BASE.getImgSize(t,e)},getUrlWithPtp:function(t){return BASE.getUrlWithPtp(t)}},window.__CUtil}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,i){var n,a;n=[],a=function(){return{isMatchMlsCdn:function(t){var e=/\/([a-zA-Z0-9]{28})_/,i=/^http\:\/\/i\.meilishuo\.net\//;return!(!e.test(t)&&!i.test(t))},getImgOriginalURL:function(t){var e=/\_\d+x\d+\./gi;if(!e.test(t))return t;var i=t.split(e),n=t.match(e);return i[0]+n[0]+i[1]},getImgThumbnailUrl:function(t,e,i){return this.isMatchMlsCdn(t)?t:(t=this.getImgOriginalURL(t),e&&i?[t,"_",e,"x",i,".jpg"].join(""):t)},getImgSize:function(t,e){if(!t)return{width:0,height:0,hwPercent:0};t=this.getImgOriginalURL(t);var i=[];if(this.isMatchMlsCdn(t)){i=t.match(/_\d+/g);for(var n=0;n<i.length;n++)i[n]=i[n].replace("_","")}else i=t.match(/\d+/g);var a=i.length,s=Number(i[a-1]),o=Number(i[a-2]),r=s/o*100;return e&&(o=o>e?e:o,r*=o/e),{width:o,height:s,hwPercent:r}},getUrlWithPtp:function(t){return window.logger?logger.generatePtpParams(t):t}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){"use strict";!function(t){function e(t){var e=null;t.on("mouseenter",".topNav .all",function(){t.find(".slideer").fadeIn(100)}).on("mouseleave",".topNav li.all",function(i){clearTimeout(e),e=setTimeout(function(){t.find(".slideer").hide()},100)}),t.on("mouseenter",".slideer",function(){clearTimeout(e),t.find(".slideer").show()}).on("mouseleave",".slideer",function(i){clearTimeout(e),e=setTimeout(function(){t.find(".slideer").hide()},100)}),$(".z-nav-list").each(function(){$(this).hover(function(){$(this).find(".category_list").show()},function(){$(this).find(".category_list").hide()})}),$(".subMenu").each(function(){$(this).hover(function(){$(this).find(".category_list").show()},function(){$(this).find(".category_list").hide()})})}e($(".mod_topNav"))}(window)},function(t,e){"use strict";window.MOGU=window.MOGU||{},function(t,e){var i={};i.Util={mask:function(){var e=t(".light_box_fullbg");e.length<=0&&(e=t(['<div class="light_box_fullbg"></div>'].join("")),t("body").append(e))},show:function(e,i){var n,a,s,o=t("#vp_wrap"),r=t(".light_box_fullbg").eq(0);o.length<=0&&(o=t(['<div class="vp_wrap" id="vp_wrap">','<h5 class="vp_t"></h5>','<a href="javascript:;" class="vp_cls">\xd7</a>','<div class="v_pop_box"></div>',"</div>"].join("")),t("body").append(o),r.off("click").on("click",function(){clearTimeout(s),o.addClass("vp_shake"),s=setTimeout(function(){o.removeClass("vp_shake")},500)})),i.isShowCloser?o.find(".vp_cls").show():o.find(".vp_cls").hide(),o.find(".vp_t").html(i.title),a={alert:function(e){return n=t(".vp_alert"),n.length<=0?n=t(['<div class="vp_alert vp_inner">','<p class="vp_cnt"></p>','<a href="javascript:;" class="vp_btn vp_btn_'+e.btn.theme+' vp_ok">'+e.btn.text+"</a>","</div>"].join("")):n.find(".vp_btn").removeClass("vp_btn_red").removeClass("vp_btn_normal").addClass("vp_btn_"+e.btn.theme).html(e.btn.text),n.show().find(".vp_cnt").html(e.content),n},confirm:function(e){if(n=t(".vp_cfm"),n.length<=0)n=t(['<div class="vp_cfm vp_inner">','<p class="vp_cnt"></p>','<a href="javascript:;" class="vp_btn vp_btn_'+e.btn1.theme+' vp_ok">'+e.btn1.text+"</a>",'<a href="javascript:;" class="vp_btn vp_btn_'+e.btn2.theme+' vp_cancel">'+e.btn2.text+"</a>","</div>"].join(""));else{var i=n.find(".vp_btn");i.removeClass("vp_btn_red").removeClass("vp_btn_normal"),i.eq(0).addClass("vp_btn_"+e.btn1.theme).html(e.btn1.text),i.eq(1).addClass("vp_btn_"+e.btn2.theme).html(e.btn2.text)}return n.show().find(".vp_cnt").html(e.content),n}},o.find(".v_pop_box").append(a[e](i)),o.css({display:"block",opacity:0}).css({"margin-left":-o.width()/2-1,"margin-top":-o.height()/2-1,opacity:1}),r.show()},close:function(e,i){t(".light_box_fullbg").eq(0).hide(),t("#vp_wrap").find(".vp_inner").hide().end().hide(),void 0!==i&&"function"==typeof i&&i(e)}},t.alert=function(e,n,a){var s=t.extend(!0,{title:"\u63d0\u793a",content:e,btn:{text:"\u786e\u5b9a",theme:"red",val:void 0},isShowCloser:!0,close_val:void 0},a),o=function(){t("#vp_wrap").off("click").on("click",".vp_ok",function(t){t.preventDefault(),i.Util.close(s.btn.val,n)}).on("click",".vp_cls",function(t){t.preventDefault(),i.Util.close(s.close_val,n)})};!function(){i.Util.mask(),i.Util.show("alert",s),o()}()},t.confirm=function(e,n,a){var s=t.extend(!0,{title:"\u63d0\u793a",content:e,btn1:{text:"\u786e\u5b9a",theme:"red",val:!0},btn2:{text:"\u53d6\u6d88",theme:"normal",val:!1},isShowCloser:!0,close_val:!1},a),o=function(){t("#vp_wrap").off("click").on("click",".vp_ok",function(t){t.preventDefault(),i.Util.close(s.btn1.val,n)}).on("click",".vp_cancel",function(t){t.preventDefault(),i.Util.close(s.btn2.val,n)}).on("click",".vp_cls",function(t){t.preventDefault(),i.Util.close(s.close_val,n)})};!function(){i.Util.mask(),i.Util.show("confirm",s),o()}()},e.MOGU.alert=t.alert,e.MOGU.confirm=t.confirm}(jQuery,window)},function(t,e,i){function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a,s=i(4),o=i(9),r=i(10),l=i(11),c=i(12),d=(i(13),i(14)),u=i(16),p=i(19);a=function(){var t="production"==MOGUPROFILE.appEnv?"http://www.meilishuo.com":"",e=$("#J_GoodsInfo"),i=$("#J_SmallImgs"),a=$("#J_BigImg"),f=$("#J_GoodsSku"),m=f.find(".J_GoodsStock"),h=$("#J_GoodsNum"),g={callbacks:{renderBefore:function(){},renderAfter:function(){v.swicthFavorable(),v.switchFreeMail(),v.getPromotion()}}},_={sku:window.detailInfo||{},filter:{}},v={init:function(){d.init(g),u.init(),r.setData(_.sku),this.sku(),this.smallImgs(),this.bindEvent()},bindEvent:function(){this.cpclog(),this.rushBuy(),this.buyNow(),this.buyCart(),this.switchImg(),this.skuPannel(),this.updateSku(),this.chooseSku(),this.stockTip(),this.switchFav(),this.switchShare(),this.changeSkuForDapei(),this.changeSku(),l.init(h,$("body")),detailInfo.isMoguer,$("#J_CountDown").length>0&&c.init($("#J_CountDown"),p.countDown)},sku:function(){var t=r.getSkuItems();if("undefined"!=typeof t&&t){var e=t.style,i=r.getStyleLen(),n=t.size,a=r.getSizeLen(),o=[],l=[];if(e&&i>0){for(var c in e){var d=[];d=e[c].img&&""!=e[c].img?{className:"img",id:c,title:e[c].style,bigImg:e[c].img,img:s.getImgThumbnailUrl(e[c].img,100,100)}:{className:"",id:c,title:e[c].style,bigImg:"",img:""},e[c].disable?d.className=d.className+" disable":1==i&&(d.className=d.className+" c",_.filter.styleId=c),o.push(MoGu.ui.getTemplate(p.sku,d))}f.find(".style").show().find(".J_StyleList").html(o.join(""))}else f.find(".style").hide();if(n&&a>0){for(var c in n){var d={className:"",id:c,title:n[c].size,bigImg:"",img:""};n[c].disable?d.className=d.className+" disable":1==a&&(d.className=d.className+" c",_.filter.sizeId=c),l.push(MoGu.ui.getTemplate(p.sku,d))}f.find(".size").show().find(".J_SizeList").html(l.join(""))}else f.find(".size").hide();_.skuItems=t,this.fresh()}},fresh:function(){if("undefined"!=typeof _.skuItems&&_.skuItems){var t=r.getSkuItem(_.filter,_.skuItems);t&&(this.price(t),this.stock(t.stock),this.list(t),_.choose=t)}},stock:function(t){m.html(t?MoGu.ui.getTemplate(p.stock,{stock:t}):""),h.attr("data-stock",t)},list:function(t){var e=t.stocks,i=0;if(e){for(var n in e){i+=e[n];var a=f.find('li[data-id="'+n+'"]');0===e[n]?a.addClass("disable"):a.removeClass("disable")}t.stock||this.stock(i)}else if(_.skuItems){if(_.skuItems.size)for(var s in _.skuItems.size){var o=_.skuItems.size[s];if(o)if(o.stocks)for(var n in o.stocks)i+=o.stocks[n]||0;else o.stock&&(i+=o.stock||0)}if(0==i&&_.skuItems.style)for(var r in _.skuItems.style){var l=_.skuItems.style[r];if(l)if(l.stocks)for(var n in l.stocks)i+=l.stocks[n]||0;else l.stock&&(i+=l.stock||0)}!t.stock&&i>0&&this.stock(i)}},price:function(t){"undefined"!=typeof t&&t&&("number"==typeof t.price?$("#J_OriginPrice").text("\xa5"+(t.price/100).toFixed(2)):_.sku.main&&_.sku.main.originPrice&&$("#J_OriginPrice").text(_.sku.main.originPrice),"number"==typeof t.nowprice?$("#J_NowPrice").text("\xa5"+(t.nowprice/100).toFixed(2)):_.sku.main&&_.sku.main.nowPrice&&$("#J_NowPrice").text(_.sku.main.nowPrice))},bigImg:function(t){t&&""!=t&&(a[0].src=t)},smallImgs:function(){if("undefined"!=typeof _.skuItems&&_.skuItems){var t=_.skuItems.style,e=(_.sku.main||{}).topImages||[],n=[];if(t){if(e)for(var a=0,o=e.length;o>a;a++)n.push('<li><img src="'+s.getImgThumbnailUrl(e[a],100,100)+'"><i></i></li>');for(var r in t)""!=t[r].img&&n.push('<li><img src="'+s.getImgThumbnailUrl(t[r].img,100,100)+'"><i></i></li>');return n.length<=1?void i.hide():void i.find("ul").html(n.join(""))}}},changeSkuForDapei:function(){$("body").on("dapeiSkuSelect",function(t,e){$(".dapei-container")&&$(".dapei-container .dapei-item").each(function(t,i){$(i).find('.dapei-body-items-item[data-index="true"] .dapei-sku-body').trigger("changeSku",[e])})})},changeSku:function(){f.on("changeSku",function(t,e){var i=f.find('.J_SizeList li[data-id="'+e.sizeId+'"]').removeClass("c");$("body").trigger("updateSku",[i]);var n=f.find('.J_StyleList li[data-id="'+e.styleId+'"]').removeClass("c");$("body").trigger("updateSku",[n])})},moguerPanel:function(){var t=window.detailInfo||{},e=t.itemId;e&&$.ajax({url:"/pc_detail/detail_admin/"+e,dataType:"html"}).done(function(t){$(".mod_topNav").after(t)})},dotlog:function(){if(window.detailInfo){var t=$("#shopid").val(),e=MGTOOL.getQueryString("cparam"),i=window.detailInfo.itemId,n=MOGUPROFILE&&MOGUPROFILE.logString;$.ajax({url:"/trade/item_detail/dotlog",type:"POST",dataType:"json",data:{itemId:i,shopId:t,cparam:e,logString:n}}).done(function(t){})}},cpclog:function(){var t=MGTOOL.getQueryString("cparam"),e=MGTOOL.getQueryString("acm");if(""!=t){var i={cparam:t,clickUserId:detailInfo.loginUserId||"",timestamp:+new Date,tradeItemId:window.detailInfo.itemId||"",uuid:MGTOOL.getCookie("__mgjuuid")||"",refUrl:window.sessionStorage.getItem("reffer")||document.referrer,platform:1,web:0,acm:e},n="http://log.juangua.com/unionlog.php?cpcparam="+encodeURIComponent(JSON.stringify(i));$("body").append("<img style='display:none' src='"+n+"'/>")}},switchImg:function(){i.on("mouseenter","li",function(){var t=$(this).find("img").eq(0).attr("src");$(this).addClass("c").siblings().removeClass("c"),a[0].src=t.replace("_100x100.jpg","_468x468.jpg")}),i.find("li").length>5?(o.init(i,{width:350,height:59}),i.find("ul").addClass("carousel"),i.find(".right-btn").show()):i.find("ul").css("text-align","center")},chooseSku:function(){f.on("click","ol li:not(.disable)",function(){$("body").trigger("updateSku",[$(this)]),$("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),y.isBuy()&&f.find(".J_PannelOK").css("display","inline-block").prev().hide(),$("body").trigger("dapeiSkuSelect",[_.filter])})},updateSku:function(){var t=this;$("body").on("updateSku",function(e,i){var n=i.closest("ol");if(i.hasClass("c")){if(n.hasClass("J_StyleList")){if(1===r.getStyleLen())return;if(i.removeClass("c"),delete _.filter.styleId,t.sku(),r.getSizeLen()>0&&_.filter.sizeId){var s=$('.J_SizeList li[data-id="'+_.filter.sizeId+'"]').removeClass("c");$("body").trigger("updateSku",[s])}t.bigImg(a.data("main"))}if(n.hasClass("J_SizeList")){if(1===r.getSizeLen())return;if(i.removeClass("c"),delete _.filter.sizeId,t.sku(),r.getStyleLen()>0&&_.filter.styleId){var o=$('.J_StyleList li[data-id="'+_.filter.styleId+'"]').removeClass("c");$("body").trigger("updateSku",[o])}}}else i.addClass("c").siblings().removeClass("c"),n.hasClass("J_StyleList")&&(_.filter.styleId=i.data("id"),_.filter.type="style",t.bigImg(i.data("src"))),n.hasClass("J_SizeList")&&(_.filter.sizeId=i.data("id"),_.filter.type="size"),t.fresh()})},stockTip:function(){$("body").on("stockTip",function(t,e,i,n){var a=n?n.siblings(".goods-stock-tip"):f.find(".J_GoodsStockTip");+e>+i?(a.show(),_.isStock=0):(a.hide(),_.isStock=1)})},limitState:function(){$("body").on("limitState",function(t,e,i,n){var a=f.find(".num-add");n&&""!=n&&(e>=Math.min(+n,i)?a.addClass("num-disable"):a.removeClass("num-disable"))})},rushBuy:function(){$("#J_ModuleRushBuy").on("click",'a[data-type="buynow"]',function(){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),_.isStock&&!$(this).hasClass("buy-disabled")){var e=y.getParams(),i={callback:function(){t(e)}};return s.isLogin(i)?(t(e),!1):!1}});var t=function(t){var e=$("<form>"),i=['<input type="hidden" name="postdata" value="'+t.id+',1" />','<input type="hidden" name="detailrefer" value="'+$("#J_DetailRefer").val()+'">','<input type="hidden" name="ptp" value='+t.ptp+">",'<input type="hidden" name="ptpData" value="'+t.ptpdata+'">','<input type="hidden" name="rushId" value="'+t.rushId+'">'].join("");e.attr({action:s.getUrlWithPtp("http://www.mogujie.com/rush/new/account?click=likegoumai"),method:"POST"}).html(i),$("body").append(e),e[0].submit()}},buyNow:function(){$("#J_BuyNow").on("click",function(){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),_.isStock){var e=y.getParams(),i={callback:function(){t(e)}};return s.isLogin(i)?(t(e),!1):!1}});var t=function(t){window.detailInfo&&window.detailInfo.shopInfo&&window.detailInfo.shopInfo.nonsupportReasonRefound?$.confirm("\u6b64\u5546\u54c1\u4e0d\u652f\u63017\u5929\u65e0\u7406\u7531\u9000\u8d27</br>\u8bf7\u77e5\u6653\u54e6",function(i){i&&e(t)},{btn1:{text:"\u7ee7\u7eed\u8d2d\u4e70",theme:"red",val:!0},btn2:{text:"\u53d6\u6d88",theme:"normal",val:!1}}):e(t)},e=function(t){try{window.logger&&logger.log("pc01022",{itemid:detailInfo.itemId,num:t.num,price:(_.choose.price/100).toFixed(2),disprice:(_.choose.nowprice/100).toFixed(2),style:_.choose.style||"",size:_.choose.size||""})}catch(e){}var i=$("<form>"),n=['<input type="hidden" name="postdata" value="'+t.stockId+","+t.num+'" />','<input type="hidden" name="detailrefer" value="'+$("#J_DetailRefer").val()+'">','<input type="hidden" name="marketType" value="market_meilishuo">','<input type="hidden" name="stockptp" value='+t.ptp+">",'<input type="hidden" name="ptp" value='+t.ptp+">",'<input type="hidden" name="orderFrom" value="detail">'].join("");i.attr({action:s.getUrlWithPtp("http://buy.meilishuo.com/mls/buy"),method:"POST"}).html(n),$("body").append(i),i[0].submit()}},buyCart:function(){var t=0;$("#J_BuyCart").on("click",function(e){if(!s.isLogin())return!1;var i=$(e.srcElement||e.target);if(!(i.length>0&&"J_ModuleCartLuckyDrawTip"==i.attr("id"))){var n=$(this);if(!n.hasClass("buy-disable")){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),_.isStock){var a=y.getParams();if(a.detailrefer=$("#J_DetailRefer").val(),a.cdtype=MGTOOL.getQueryString("cdtype"),a.price=_.choose.nowprice,top.location!=self.location){var o=y.getBuyURL("WX_CART",a);return void window.open(o)}n.addClass("buy-disable"),clearTimeout(t),t=setTimeout(function(){n.removeClass("buy-disable")},1e3);var r=100,l=!!$.browser.msie&&"6.0"==$.browser.version;$("#J_AddCartBox .J_Close").trigger("click");var c={title:"\u6dfb\u52a0\u8d2d\u7269\u8f66",lightBoxId:"J_AddCartBox",contentHtml:MoGu.ui.getTemplate(p.addcart,{src:y.getBuyURL("CART",a),farameHeight:r}),scroll:!1,resizeshow:l},d=function(t){window.detailInfo&&window.detailInfo.shopInfo&&window.detailInfo.shopInfo.nonsupportReasonRefound?$.confirm("\u6b64\u5546\u54c1\u4e0d\u652f\u63017\u5929\u65e0\u7406\u7531\u9000\u8d27</br>\u8bf7\u77e5\u6653\u54e6",function(t){t&&u()},{btn1:{text:"\u7ee7\u7eed\u52a0\u5165\u8d2d\u7269\u8f66",theme:"red",val:!0},btn2:{text:"\u53d6\u6d88",theme:"normal",val:!1}}):u()},u=function(){var t=new MGLightBox(c);t.init(),$("#J_AddCartBox").on("click",".J_Close",function(){t.close()}).find(".lb_bd").css({padding:0,background:"none"}).prev().remove();try{window.logger&&logger.log("pc01021",{itemid:detailInfo.itemId,num:a.num,price:(_.choose.price/100).toFixed(2),disprice:(_.choose.nowprice/100).toFixed(2),style:_.choose.style||"",size:_.choose.size||""})}catch(e){}detailInfo.redPacketsSwitch&&(console.log("\u5f00\u5173\u6ca1\u5f00\uff0c\u62bd\u5956\u4e0d\u751f\u6548\uff0c\u627e\u900d\u9065\uff0c\u5b89\u4e16"),s.cartAfterForLuckyDraw())};d()}}}}),window.__DetailBuyCartEnable=function(){clearTimeout(t),$("#J_BuyCart:visible").removeClass("buy-disable")}},flyToChart:function(t,e){var i=$(".mgj-my-cart").offset(),n=$("#J_BuyCart:visible"),a=$('<img class="u-flyer" style="display: block;width: 50px;height: 50px;border-radius: 50px;position: fixed;z-index: 9999;" src="http://s16.mogucdn.com/p1/150928/upload_ieywizlbgfrtqodfgmzdambqmeyde_60x60.png"/>');if(n.length<=0&&(n=$(".J_PannelOK:visible").eq(0)),!(n.length<=0)){var s=document.body.scrollLeft||document.documentElement.scrollLeft||window.pageXOffset||0,o=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,r=0,l=0;t.pageX&&t.pageY?(r=t.pageX,l=t.pageY-o-20):(r=n.offset().left-s+n.outerWidth()/2,l=n.offset().top-o+n.outerHeight()/2),a.fly({start:{left:r,top:l},end:{left:i.left-s,top:20+i.top-o,width:20,height:20},onEnd:function(){e()}})}},getPromotion:function(){var t=!1;$(".J_get_promotion").on("click",function(){var e,i=$(this),a={callback:function(){i.trigger("click")}};if(s.isLogin(a)&&!t){t=!0;var o=i.attr("pid");$.ajax((e={url:"/getpro/"+o},n(e,"url","http://promotionnew.meilishuo.com/jsonp/getShopCoupon/1"),n(e,"dataType","jsonp"),n(e,"data",{campId:o,proba:window._v_pa||"",
probb:window._f_pa||""}),e)).done(function(t){t.success?(i.removeClass("not-get-btn"),i.off("click"),i.removeClass(".J_get_promotion"),i.text("\u5df2\u9886\u53d6")):"SESSION_INVALID"==t.returnCode?s.goToLogin():$.alert(t.message)}).fail(function(t){$.alert("\u7cfb\u7edf\u7e41\u5fd9")}).always(function(){t=!1})}})},skuPannel:function(){f.on("click",".J_PannelClose",function(){f.removeClass("goods-pannel")}).on("click",".J_PannelOK",function(t){var e=$.Event("click");e.pageX=t.pageX,e.pageY=t.pageY,f.removeClass("goods-pannel").data("btn").trigger(e)})},switchElem:function(t,e){var i=null;t.hover(function(){i&&clearTimeout(i),e.show()},function(){i=setTimeout(function(){e.hide()},100)})},switchFav:function(){var t=!1;e.on("click",".fav",function(){var e={},i=$(this),n={callback:function(){i.trigger("click")}};if(s.isLogin(n)){e.twitterid=i.attr("tid"),e.tradeitemid=i.attr("tradeitemid"),e.content="",e.local=MOGUPROFILE.local;var a=i.attr("tradeitemid"),o=encodeURIComponent(detailInfo.cids||""),r=parseInt(i.find(".fav-num").text());t||(t=!0,$.ajax({url:"http://social.meilishuo.com/praise/like/like?object_type="+o,type:"get",dataType:"jsonp",data:{is_outsite:2,action_type:11,object_id:a}}).done(function(t){var e=t.code;"0"==e?(r+=1,i.removeClass("fav").addClass("faved").find(".fav-num").text(r)):"-1"==e&&s.goToLogin()}).fail(function(){$.alert("\u7cfb\u7edf\u7e41\u5fd9")}).always(function(){t=!1}))}}).on("click",".faved",function(){var e={},i=$(this),n={callback:function(){i.trigger("click")}};if(s.isLogin(n)){e.twitterid=i.attr("tid"),e.tradeitemid=i.attr("tradeitemid");var a=i.attr("tradeitemid"),o=encodeURIComponent(detailInfo.cids||""),r=parseInt(i.find(".fav-num").text());t||(t=!0,$.ajax({url:"http://social.meilishuo.com/praise/like/unlike?object_type="+o,type:"get",dataType:"jsonp",data:{is_outsite:2,action_type:11,object_id:a}}).done(function(t){var e=t.code;"0"==e?(0==r?r=0:r-=1,i.removeClass("faved").addClass("fav").find(".fav-num").text(r)):"-1"==e&&s.goToLogin()}).fail(function(){$.alert("\u7cfb\u7edf\u7e41\u5fd9")}).always(function(){t=!1}))}})},switchShare:function(){this.switchElem(e.find(".share"),e.find(".share-w"))},swicthFavorable:function(){var t=e.find(".favorable-list");t.length<=0||this.switchElem(e.find(".promotion-box"),t)},switchFreeMail:function(){var t=e.find(".freeMail-box"),i=e.find(".freeMail-detail");t&&i&&this.switchElem(t,i)},scrollLoad:function(){var t=window.detailInfo.rushId?"1":"0",e=window.detailInfo.rushId||window.detailInfo.itemId,i=$("#shopid").val(),n=[{name:"ModuleLook",url:"/trade/item_detail/hotlist?type=lookbox&shopId="+i+"&itemId="+e+"&itemType="+t+"&isNewDetail=1",callback:function(t){1001==t.status.code&&$("#J_ModuleLook").html(t.result||"")}}];Scroll.init(n)}},y={isBuy:function(){var t=r.getStyleLen(),e=r.getSizeLen();if(t>0&&e>0)return _.filter.styleId&&_.filter.sizeId?1:0;if(t>0&&0>=e)return _.filter.styleId?1:0;if(0>=t&&e>0)return _.filter.sizeId?1:0;if(0>=t&&0>=e){var i=window.detailInfo.attribute;return i&&1==i.length?(_.choose=i[0],1):0}},getParams:function(){var t={};t.stockId=_.choose.stockId,t.num=+h.find(".num-input").val(),t.traceid=$("#traceid").val()||"",t.cpcid=$("#cpcid").val()||"";var e={};return e[_.choose.stockId]=MGTOOL.getQueryString("ptp"),t.ptp=JSON.stringify(e),t.ptpdata=MGTOOL.getQueryString("ptp"),t.rushId=$("#J_RushId").val()||"",t},getBuyURL:function(e,i){var n=[t];switch(e){case"WX_CART":n.push("/add2cart2");break;case"CART":n=[],n.push("http://cart.meilishuo.com/mls/cart/addcart")}var a=i.detailrefer.split("&ptp")[0];return n.push("?stockId="+i.stockId+"&number="+i.num+"&traceid="+i.traceid+"&tradeItemId="+window.detailInfo.itemId+"&cpcid="+i.cpcid+"&ptp="+i.ptpdata+"&price="+i.price,"&cdtype="+i.cdtype,"&detailrefer="+a,"&marketType=market_meilishuo","&iscosta=true"),n.join("")}};return window.__RefreshSKUForRush=function(t){_.sku.attribute=t||{},r.setData(_.sku),v.sku()},{init:function(){v.init()}}}.call(e,i,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n;n=function(){var t={init:function(t,e){var i={},e=$.extend(i,e),n=t.find("ul"),a=n.find("li").eq(0),s=n.find("li").length,o=parseInt(a.css("margin-right")),r=(a.width()+o)*s,l=0,c=!1;t.find(".list").width(e.width).height(e.height).end().on("click",".right-btn",function(){var t=$(this);-l>=r-e.width||c||(l-=e.width,n.animate({left:l},"slow","swing",function(){-l>=r-e.width?t.hide().prev().show():t.prev().show(),c=!1}),c=!0)}).on("click",".left-btn",function(){var t=$(this);0>=-l||c||(l+=e.width,n.animate({left:l},"slow","swing",function(){0>=-l?t.hide().next().show():t.next().show(),c=!1}),c=!0)}),n.addClass("carousel"),t.find(".right-btn").show()}};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t={},e={},i=function(){if("undefined"!=typeof e&&e){for(var i=e.attribute||[],n=[],s=[],o=[],r=[],l=0,c=i.length-1;c>=0;c--)i[c].styleId&&(n.push(i[c].styleId),s.push(i[c].style)),i[c].sizeId&&(o.push(i[c].sizeId),r.push(i[c].size)),l+=i[c].stock||0;return n=a(n),o=a(o),t.styleLen=n.length,t.sizeLen=o.length,t.totalStock=l,{styleIds:n,sizeIds:o}}},n=function(t){return"undefined"!=typeof t&&t&&t.attribute&&!(t.attribute.length<=0)},a=function(t){t=t.slice().sort(function(t,e){return t>e?1:-1});for(var e,i,n=0,a=t.length;a>n;n++){for(e=n,i=t[n];a>e+1&&t[e+1]===i;)e++;e-n&&(e-=n,t.splice(n+1,e),a-=e)}return t},s={setData:function(t){n(t)&&(e=t)},getSkuItems:function(){var t=i();if("undefined"!=typeof t&&t){var n=e.attribute||[],a=t.styleIds,s=t.sizeIds,o=a.length,r=s.length,l={style:{},size:{}};if(o>0)if(r>0)for(var c=0,d=o;d>c;c++){l.style[a[c]]={},l.style[a[c]].stockId={},l.style[a[c]].stocks={},l.style[a[c]].sizeVals={},l.style[a[c]].nowprice={},l.style[a[c]].price={};for(var u=0,p=c*r,f=(c+1)*r;f>p;p++)l.style[a[c]].stockId[n[p].sizeId]=n[p].stockId,l.style[a[c]].stocks[n[p].sizeId]=n[p].stock,l.style[a[c]].sizeVals[n[p].sizeId]=n[p].size,l.style[a[c]].nowprice[n[p].sizeId]=n[p].nowprice,l.style[a[c]].price[n[p].sizeId]=n[p].price,l.style[a[c]].img=n[p].img,l.style[a[c]].style=n[p].style,0===n[p].stock&&++u;u==r&&(l.style[a[c]].disable=!0)}else for(var c=0,d=o;d>c;c++)l.style[a[c]]={},l.style[a[c]].stockId=n[c].stockId,l.style[a[c]].stock=n[c].stock,l.style[a[c]].img=n[c].img,l.style[a[c]].style=n[c].style,l.style[a[c]].nowprice=n[c].nowprice,l.style[a[c]].price=n[c].price,0===n[c].stock&&(l.style[a[c]].disable=!0);if(r>0)if(o>0)for(var c=0,d=r;d>c;c++){l.size[s[c]]={},l.size[s[c]].stockId={},l.size[s[c]].stocks={},l.size[s[c]].styleVals={},l.size[s[c]].nowprice={},l.size[s[c]].price={};for(var u=0,p=0,f=o;f>p;p++){var m=p*r+c;l.size[s[c]].stockId[n[m].styleId]=n[m].stockId,l.size[s[c]].stocks[n[m].styleId]=n[m].stock,l.size[s[c]].styleVals[n[m].styleId]=n[m].style,l.size[s[c]].nowprice[n[m].styleId]=n[m].nowprice,l.size[s[c]].price[n[m].styleId]=n[m].price,l.size[s[c]].size=n[m].size,0===n[m].stock&&++u}u==o&&(l.size[s[c]].disable=!0)}else for(var c=0,d=r;d>c;c++)l.size[s[c]]={},l.size[s[c]].stockId=n[c].stockId,l.size[s[c]].stock=n[c].stock,l.size[s[c]].size=n[c].size,l.size[s[c]].nowprice=n[c].nowprice,l.size[s[c]].price=n[c].price,0===n[c].stock&&(l.size[s[c]].disable=!0);return l}},getStyleLen:function(){return t.styleLen?t.styleLen:0},getSizeLen:function(){return t.sizeLen?t.sizeLen:0},getSkuItem:function(t,e){if(t||e){var i={};return t.styleId&&t.sizeId?i="style"==t.type?{price:e.style[t.styleId].price[t.sizeId],nowprice:e.style[t.styleId].nowprice[t.sizeId],style:e.style[t.styleId].style,img:e.style[t.styleId].img,stock:e.style[t.styleId].stocks[t.sizeId],stocks:e.style[t.styleId].stocks,size:e.style[t.styleId].sizeVals[t.sizeId],stockId:e.style[t.styleId].stockId[t.sizeId]}:{price:e.size[t.sizeId].price[t.styleId],nowprice:e.size[t.sizeId].nowprice[t.styleId],size:e.size[t.sizeId].size,stock:e.size[t.sizeId].stocks[t.styleId],stocks:e.size[t.sizeId].stocks,style:e.size[t.sizeId].styleVals[t.styleId],stockId:e.size[t.sizeId].stockId[t.styleId]}:t.styleId?i=e.style[t.styleId]:t.sizeId&&(i=e.size[t.sizeId]),i||{}}}};return s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t={init:function(t,e){var i=t.find(".num-input"),n=t.find(".num-add"),a=t.find(".num-reduce"),s=+i.val()||1,o=i.attr("data-limitnum"),r=function(){var e=+t.attr("data-stock");1>=s&&a.addClass("num-disable"),s>=e&&n.addClass("num-disable")},l=function(){n.on("click",function(){if(!$(this).hasClass("num-disable")){var n=+t.attr("data-stock");s=+i.val(),/^\d+$/.test(s)&&(++s,s>1&&a.removeClass("num-disable"),i.val(s),e.trigger("stockTip",[s,n,t]),o&&$("body").trigger("limitState",[s,n,o]))}}),a.on("click",function(){if(!$(this).hasClass("num-disable")){var n=+t.attr("data-stock");s=+i.val(),/^\d+$/.test(s)&&!a.hasClass("num-disable")&&(i.val(--s),1>=s&&a.addClass("num-disable"),e.trigger("stockTip",[s,n,t]),o&&$("body").trigger("limitState",[s,n,o]))}}),i.on("change",function(){var n=+t.attr("data-stock");return s=+i.val(),/^\d+$/.test(s)&&0!==s&&""!==s?(s>1&&a.removeClass("num-disable"),1>=s&&a.addClass("num-disable"),i.val(s),void e.trigger("stockTip",[s,n,t])):(i.val(1),void e.trigger("stockTip",[1,n,t]))})},c=function(){r(),l()};c()}};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t=function(t){var e=3600,i=60,n=1,a=parseInt(t/86400),s=parseInt(t/e)-24*a,o=parseInt(t/i)-60*parseInt(t/e),r=parseInt(t/n)-60*parseInt(t/i);return{day:a,hour:s,min:o,sec:r}},e=function n(e,i,a){if(!(0>=a)){a--;var s=t(a),o=MoGu.ui.getTemplate(i,s);e.html(o),setTimeout(function(){n(e,i,a)},1e3)}},i={init:function(t,i){if(!(t.length<=0)){var n=t.attr("cut-time");e(t,i,n)}}};return i}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){!function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+a)},a);return t=n+a,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),$.fly=function(t,e){var i={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:$.noop},n=this,a=$(t);n.init=function(t){this.setOptions(t),!!this.settings.autoPlay&&this.play()},n.setOptions=function(t){this.settings=$.extend(!0,{},i,t);var e=this.settings,n=e.start,s=e.end;a.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=s.width&&null!=s.height&&$.extend(!0,n,{width:a.width(),height:a.height()});var o=Math.min(n.top,s.top)-Math.abs(n.left-s.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(n.top,s.top)));var r=Math.sqrt(Math.pow(n.top-s.top,2)+Math.pow(n.left-s.left,2)),l=Math.ceil(Math.min(Math.max(Math.log(r)/.05-75,30),100)/e.speed),c=n.top==o?0:-Math.sqrt((s.top-o)/(n.top-o)),d=(c*n.left-s.left)/(c-1),u=s.left==d?0:(s.top-o)/Math.pow(s.left-d,2);$.extend(!0,e,{count:-1,steps:l,vertex_left:d,vertex_top:o,curvature:u})},n.play=function(){this.move()},n.move=function(){var t=this.settings,e=t.start,i=t.count,n=t.steps,s=t.end,o=e.left+(s.left-e.left)*i/n,r=0==t.curvature?e.top+(s.top-e.top)*i/n:t.curvature*Math.pow(o-t.vertex_left,2)+t.vertex_top;if(null!=s.width&&null!=s.height){var l=n/2,c=s.width-(s.width-e.width)*Math.cos(l>i?0:(i-l)/(n-l)*Math.PI/2),d=s.height-(s.height-e.height)*Math.cos(l>i?0:(i-l)/(n-l)*Math.PI/2);a.css({width:c+"px",height:d+"px","font-size":Math.min(c,d)+"px"})}a.css({left:o+"px",top:r+"px"}),t.count++;var u=window.requestAnimationFrame($.proxy(this.move,this));i==n&&(window.cancelAnimationFrame(u),t.onEnd.apply(this))},n.destroy=function(){a.remove()},n.init(e)},$.fn.fly=function(t){return this.each(function(){void 0==$(this).data("fly")&&$(this).data("fly",new $.fly(this,t))})}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,a,s=i(4),o=i(15);n=[],a=function(){var t={$container:null,_defaults:{callbacks:{renderBefore:function(){},renderAfter:function(){}}},settings:null,itemId:null,shopId:null,moduleData:null,_getAjaxParam:function(){return{url:"http://promotionnew.meilishuo.com/jsonp/getValidShopProList/1",type:"get",dataType:"jsonp",jsonp:"callback",data:{sellerId:window.detailInfo.sellerId||"",marketType:"market_meilishuo",itemIds:s.getItemId()}}},_initElem:function(){this.$container=$("#J_ModulePromotions")},_initData:function(){var t=this;this._triggerCallBack("renderBefore",null),this.itemId=s.getItemId(),this.shopId=s.getShopId();var e=$.extend(!0,{},this._getAjaxParam(),{});$.ajax(e).done(function(e){if(!e.success)return void console.log("\u4f18\u60e0\u5238\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+e.message);var i=!!e.data.list&&e.data.list.length>0,n=!!e.data.freeMail&&e.data.freeMail.length>0;(i||n)&&(t.moduleData=e.data,t._render(),t._events())}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),this._triggerCallBack("renderAfter",null)},_events:function(){},_triggerCallBack:function(t,e){var i=this;if(i.settings&&i.settings.callbacks){var n=i.settings.callbacks[t];"function"==typeof n&&n&&n.call(i,e)}},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<dl class="clearfix promotions-box">\n  <dt>\u5e97\u94fa\u4f18\u60e0\uff1a</dt>\n  <dd class="clearfix">\n    {{?false}}\n    <!-- \u76ee\u524d\u6a21\u5757\u7684\u5212\u5206\u662f\u4ece\u8fd9\u91cc\u5f00\u59cb\u7684\uff0c\u540e\u7eed\u4f1a\u628a\u8fd9\u5757\u6539\u9020\uff0c\u653e\u5728\u6700\u5916\u9762 -->\n    {{?}}\n    <div class="module-promotions clearfix">\n        <!-- \u5e97\u94fa\u4f18\u60e0\u5217\u8868 -->\n        {{var __list = it.list;}}\n        {{?__list && __list.length > 0}}\n          <div class="promotion-box">\n              <span class="info shopPromotion-info">{{=__list[0].limitDesc}}{{=__list[0].effectDesc}}</span>\n              <span class="more"></span>\n              <div class="favorable-list">\n                  <ul>\n                    {{~__list: item}}\n                      <div class="favorable-item fl">\n                          <span class="dot fl">\u25aa</span>\n                          <span class="fl">{{=item.limitDesc}}{{=item.effectDesc}}</span>\n                          {{?item.isNeedGet}}\n                            {{?item.isAlreadGet}}\n                              <span class="fr get-btn">\u5df2\u9886\u53d6</span>                                      \n                            {{??}}\n                              <span class="fr get-btn not-get-btn J_get_promotion" pid="{{=item.campId}}">\u9886\u53d6</span>                                    \n                            {{?}}\n                          {{?}}\n                      </div>\n                    {{~}}\n                  </ul>\n                  <b></b>\n              </div>\n          </div>\n        {{?}}\n        \n        <!-- \u6ee1\u5305\u90ae -->\n        {{var __freeMail = it.freeMail;}}\n        {{?__freeMail && __freeMail.length > 0}}\n          {{~__freeMail: freeMailItem :freeMailIndex}}\n            <!-- \u6ee1\u5305\u90ae\u6570\u636e\uff0c\u53ea\u8bfb\u53d6\u7b2c\u4e00\u9879\u6570\u636e -->\n            {{?freeMailIndex == 0}}\n              <div class="freeMail-box">\n                  <span class="info freeMail-info">{{=freeMailItem.title}}</span>\n                  <span class="more"></span>\n                  <div class="freeMail-detail fl">\n                      <span class="fl freeMail-title">\u25aa \u5305\u90ae\u8bf4\u660e</span>\n                      {{?freeMailItem.desc}}\n                        <span class="fl freeMail-desc">\u4e0d\u5305\u62ec {{=freeMailItem.desc.join(\'/\')}} \u5730\u533a</span>\n                      {{??}}\n                        <span class="fl freeMail-desc">\u5168\u56fd\u5305\u90ae</span>\n                      {{?}}\n                      <span class="fl freeMail-title">\u25aa \u6d3b\u52a8\u65f6\u95f4</span>                                        \n                      <span class="fl time">{{=__CUtil.formatTimeStamp(freeMailItem.startTime, \'yyyy.MM.dd\')}} ~ {{=__CUtil.formatTimeStamp(freeMailItem.endTime, \'yyyy.MM.dd\')}}</span>\n                      <b></b>\n                  </div>\n              </div>\n            {{?}}\n          {{~}}\n        {{?}}\n    </div>\n  </dd>\n</dl>\n'},function(t,e,i){var n,a,s=i(17),o=i(4),r=i(18);n=[],a=function(){var t=window.M&&M.MWP||MoGu&&MoGu.MWP||window.MWP||null,e={$container:null,itemId:null,moduleData:null,_getAjaxParam:function(){var t=7119;return{url:"http://mcebackup.mogucdn.com/jsonp/get/3%3Fpid="+t+"%26callback=jsonp"+t+"backup",type:"get",dataType:"jsonp",jsonpCallback:"jsonp"+t+"backup",data:{iidE:this.itemId,pid:t,plat:"pc",pageSize:3}}},_initElem:function(){this.$container=$("#J_ModuleLook")},_initData:function(){var e=this;this.itemId=o.getItemId();var i=$.extend(!0,{},this._getAjaxParam(),{});t&&t.request("mwp.darwin.get","3",{iidE:this.itemId,pid:7119,plat:"pc",pageSize:3}).then(function(i){if(i){if(i.ret!==t.Code.Success)return void console.log("\u70ed\u5356\u63a8\u8350\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+i.message);e.moduleData=i.data,e._render(),e._events();var n=i.data.list||[];s.recommender(n)}})["catch"](function(){$.ajax(i).done(function(t){if(t){if(!t.success)return void console.log("\u70ed\u5356\u63a8\u8350\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+t.message);e.moduleData=t.data,e._render(),e._events();var i=t.data.list||[];s.recommender(i)}}).fail(function(){})})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t)},_events:function(){},init:function(){this._initElem(),this._initData()}};return e}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=[],a=function(){return{recommender:function(t){try{var e=function(){var e=[],i=[],n=[];return t&&t.length?(t.forEach(function(t,a){e.push(t.acm||""),i.push(t.item_id||""),n.push(a)}),void logger.log("70500",{acms:e,iids:i,indexs:n})):{v:void 0}}();if("object"===("undefined"==typeof e?"undefined":s(e)))return e.v}catch(i){window.console&&console.log("\u5546\u54c1\u63a8\u8350\u6570\u636e\u66dd\u5149\u6253\u70b9\uff1a",i)}}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u70ed\u5356\u63a8\u8350 -->\n{{?it.list && it.list.length > 0}}\n<p class="title"><s></s><span>\u70ed\u5356\u63a8\u8350</span></p>\n<div class="list">\n    <div class="box">\n      <ul>\n        {{~it.list:item:index}}\n        <li>\n          <a href="{{=item.item_url}}" target="_blank">\n            <img src="{{=__CUtil.getImgThumbnailUrl(item.image, 220, 330)}}" width="120">\n          </a>\n          <span>\uffe5{{=item.discountPrice}}</span>\n        </li>\n        {{~}}\n      </ul>\n    </div>\n</div>\n{{?}}'},function(t,e,i){var n;n=function(){var t={sku:['{{ if(it.img && it.img != ""){ }}','<li class="{{=it.className}}" data-id="{{=it.id}}" data-src="{{=it.bigImg}}" title="{{=it.title}}"><img src="{{=it.img}}"><b></b></li>',"{{ }else{ }}",'<li class="{{=it.className}}" data-id="{{=it.id}}" title="{{=it.title}}">{{=it.title}}</li>',"{{ } }}"].join(""),stock:"\u5e93\u5b58{{=it.stock}}\u4ef6",addcart:["<div class='content'>","<div class='head clearfix'>","<a href='javascript:;' class='J_Close close-btn'>\u5173\u95ed</a>","</div>","<div class='body'>",'<iframe src=\'{{=it.src}}\' width="500" height="{{=it.farameHeight}}" scrolling="no" frameborder="0">',"</div>","</div>"].join(""),countDown:['<span class="d">{{=it.day}}</span>\u5929','<span class="h">{{=it.hour}}</span>\u5c0f\u65f6','<span class="m">{{=it.min}}</span>\u5206','<span class="s">{{=it.sec}}</span>\u79d2'].join("")};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,a,s=i(4),o=i(21),r=i(22),l=i(23),c=i(24),d=i(25),u=i(26),p=i(29),f=i(31),m=i(34),h=i(36),g=i(38),_=i(39),v=i(43),y=i(45);n=[],a=function(){if(!s.getIsNone()){var t={events:{loading:function(t){},loaded:function(t){h.addPositonDataForRecommend()}}},e={events:{loading:function(t){},loaded:function(e){h.init(e.moduleData),m.init(t)}}},i={events:{switchBefore:function(e){if(!e.isActived)switch(e.curPanel){case"graphic":break;case"rates":break;case"recommend":m.init(t),$(window).scrollTop(function(){return $(window).scrollTop()-1})}},switchAfter:function(t){}}},n={_initCommon:function(){o.test(),r.init()},_initModule:function(){_.init(),v.init(),y.init(),c.init(),d.init(),g.init(),u.init(),p.init(e),f.init(),l.init(i)},init:function(){this._initCommon(),this._initModule()}};return n}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={test:function(){s.getIsScreen()&&$("body").off(".screen").on("click.screen",function(){return $(this).toggleClass("media_screen_1200 media_screen_960"),!1})}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a;n=[],a=function(){return window.__CFixed=window.__CFixed||{$win:null,tabpanelSelector:"#J_ModuleTabpanel",shopSelector:"#J_ModuleShop",cartSelector:"#J_ModuleCart",extranavSelector:"#J_ModuleExtranav",__target:null,__preIsFixed:!1,init:function(){var t=this;t.$win=$(window),t.$win.off(".dfixed").on("scroll.dfixed",function(){t.scroll()}),t.scroll()},getTarget:function(){var t=this;return t.__target||(t.__target={fixed:function(){var e=$(".tabbar-box, .tabbar-bg",t.tabpanelSelector),i=$(".shop-hd",t.shopSelector),n=$(".cart-hd",t.cartSelector),a=$(".extranav-bd",t.extranavSelector);return e.add(i).add(n).add(a)}(),occupying:function(){var e=$(".tabbar-occupying, .tabbar-bg",t.tabpanelSelector),i=$(".shop-occupying",t.shopSelector);return e.add(i)}()}),t.__target},scroll:function(){var t=this,e=$(t.tabpanelSelector),i=e.length?e.offset().top:0,n=t.$win.scrollTop(),a=n>=i,s=t.getTarget();a!==t.__preIsFixed&&(t.__preIsFixed=a,s.fixed.toggleClass("ui-fixed",a),s.occupying.toggleClass("ui-hide",!a))}},window.__CFixed}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={$container:null,_defaults:{events:{switchBefore:function(t){},switchAfter:function(t){}}},settings:null,_initElem:function(){this.$container=$("#J_ModuleTabpanel")},_event:function(){var t=this;$(".tabbar-list",t.$container).off(".tab").on("click.tab","li[data-panels]",function(){t._eventSwitch(this)}),$(".qrcode",t.$container).off(".qc").on("mouseenter.qc",function(){var t=$(this);t.addClass("active"),t.data("isadd")||(t.data("isadd",!0),$(".qrcode-pic",this).html(function(){var t="";if(s.getPageTypeIsItem())t="http://weixin.meilishuo.com/wx/detail/"+s.getItemId();else{if(!s.getPageTypeIsRush())return"";t="http://m.mogujie.com/rush/seckill/"+s.getRushId()}return t=encodeURIComponent(t),'<img src="http://www.mogujie.com/trade/item_detail/qrcode?url='+t+'">'}))}).on("mouseleave.qc",function(){var t=$(this);t.removeClass("active")})},_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_eventSwitch:function(t){var e=this,i=$(t),n=i.data("panels").split(","),a=i.data("hasnav"),o=!!i.data("isactived");if(0!=n.length){var r={isActived:o,curPanel:n[0],allPanels:n};e._trigger("switchBefore",r),i.addClass("selected").data("isactived","true").siblings("li[data-panels]").removeClass("selected"),$("#J_ModuleExtranav").toggleClass("ui-none",!a),$(".module-panel",e.$container).addClass("ui-none"),$.each(n,function(t,i){var n=$(".module-"+i,e.$container);n.removeClass("ui-none"),0==t&&0!=n.length&&s.goToTabPosition(n)}),e._trigger("switchAfter",r)}},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._event()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={$container:null,itemId:null,_initElem:function(){this.$container=$("#J_ModuleShop")},_initData:function(){this.itemId=s.getItemId()},_shopFav:function(t){var e=$(t.currentTarget);e.hasClass("btn-faved");if(!e.data("__isAjaxFav")){e.data("__isAjaxFav",!0);var i=e.attr("data-shopid"),n={callback:function(){e.trigger("click")}};return s.isLogin(n)?void $.ajax({url:"/x6/shop/"+i+"/collectShop",type:"post",dataType:"json",data:null}).done(function(t){1001==t.status.code?"\u53d6\u6d88\u6536\u85cf\u6210\u529f"===t.result?e.removeClass("btn-faved").addClass("btn-fav").html("\u6536\u85cf\u5e97\u94fa"):e.removeClass("btn-fav").addClass("btn-faved").html("\u5df2\u6536\u85cf"):$.alert(t.status.msg),e.data("__isAjaxFav",!1)}):void e.data("__isAjaxFav",!1)}},_shopSearch:function(t){var e=$(this),i=$('input[type="text"]',e),n=$.trim(i.val());return""==n?($.alert("\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u641c\u7d22\u7684\u5173\u952e\u8bcd"),!1):void 0},_events:function(){$("#J_ShopFav").on("click",this._shopFav),$("#J_ShopSearch").on("submit",this._shopSearch)},init:function(){this._initElem(),this._initData(),this._events()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={$container:null,itemId:null,_initElem:function(){this.$container=$("#J_ModuleClassify")},_initData:function(){this.itemId=s.getItemId()},_showSubList:function(){$item=$(this).siblings(".category-subList"),$item.hasClass("show")?$item.removeClass("show").addClass("hide").hide(200):$item.hasClass("hide")&&$item.removeClass("hide").addClass("show").show(200)},_events:function(){$(".category-parent").children("a").off("click").on("click",this._showSubList)},init:function(){this._initElem(),this._initData(),this._events()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(17),o=i(4),r=(i(27),i(28));n=[],a=function(){var t=window.M&&M.MWP||MoGu&&MoGu.MWP||window.MWP||null,e={$container:null,itemId:null,moduleData:null,_isLoaded:!1,_getAjaxParam:function(){var t=7121;return{url:"http://mcebackup.mogucdn.com/jsonp/get/3%3Fpid="+t+"%26callback=jsonp"+t+"backup",type:"get",dataType:"jsonp",jsonpCallback:"jsonp"+t+"backup",data:{iidE:this.itemId,pid:t,plat:"pc",pageSize:12}}},_initElem:function(){this.$container=$("#J_ModuleRepeat")},_initData:function(){var e=this;this.itemId=o.getItemId();var i=$.extend(!0,{},this._getAjaxParam(),{});t&&t.request("mwp.darwin.get","3",{iidE:this.itemId,pid:7121,plat:"pc",pageSize:12}).then(function(i){if(i){if(i.ret!==t.Code.Success)return void console.log("\u770b\u4e86\u53c8\u770b\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+i.message);e.moduleData=i.data,e._render(),e._events();var n=i.data.list||[];s.recommender(n)}})["catch"](function(){$.ajax(i).done(function(t){if(t){if(!t.success)return void console.log("\u770b\u4e86\u53c8\u770b\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+t.message);e.moduleData=t.data,e._render(),e._events();var i=t.data.list||[];s.recommender(i)}}).fail(function(){})})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload()},_events:function(){},_initEvent:function(){var t=this,e=$(window);t.$container.length&&e.off(".m-repeat").on("scroll.m-repeat",function(){var i=e.scrollTop()+e.height()+300;!t._isLoaded&&i>t.$container.offset().top&&(t._isLoaded=!0,e.off(".m-repeat"),t._initData())})},init:function(){this._initElem(),this._initEvent()}};return e}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){"use strict";!function(t,e,i,n){var a=t(e);t.fn.lazyload=function(s){function o(){var e=0;l.each(function(){var i=t(this);if(!c.skip_invisible||i.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else i.trigger("appear"),e=0})}var r,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(c,s)),r=c.container===n||c.container===e?a:t(c.container),0===c.event.indexOf("scroll")&&r.bind(c.event,function(){return o()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",c.placeholder),i.one("appear",function(){if(!this.loaded){if(c.appear){var n=l.length;c.appear.call(e,n,c)}t("<img />").bind("load",function(){var n=i.attr("data-"+c.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[c.effect](c.effect_speed),e.loaded=!0;var a=t.grep(l,function(t){return!t.loaded});if(l=t(a),c.load){var s=l.length;c.load.call(e,s,c)}}).attr("src",i.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&i.bind(c.event,function(){e.loaded||i.trigger("appear")})}),a.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(i).ready(function(){o()}),this},t.belowthefold=function(i,s){var o;return o=s.container===n||s.container===e?(e.innerHeight?e.innerHeight:a.height())+a.scrollTop():t(s.container).offset().top+t(s.container).height(),o<=t(i).offset().top-s.threshold},t.rightoffold=function(i,s){var o;return o=s.container===n||s.container===e?a.width()+a.scrollLeft():t(s.container).offset().left+t(s.container).width(),o<=t(i).offset().left-s.threshold},t.abovethetop=function(i,s){var o;return o=s.container===n||s.container===e?a.scrollTop():t(s.container).offset().top,o>=t(i).offset().top+s.threshold+t(i).height()},t.leftofbegin=function(i,s){var o;return o=s.container===n||s.container===e?a.scrollLeft():t(s.container).offset().left,o>=t(i).offset().left+s.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document)},function(t,e){t.exports='<!-- \u770b\u4e86\u53c8\u770b -->\n<!-- \n    \u6ce8\uff1aPHP\u6a21\u677f\u8d70\u7684\u662f\u672c\u5730\u6a21\u677f\u6587\u4ef6\uff1aviews/modules/module-repeat.php\n-->\n\n<!-- \u770b\u4e86\u53c8\u770b\u4fe1\u606f -->\n{{?it.list && it.list.length}}\n<div class="ui-box repeat-info">\n    <h3 class="ui-hd">\u770b\u4e86\u53c8\u770b</h3>\n    <div class="ui-bd">\n        <!-- \u5217\u8868 -->\n        <ul class="repeat-list">\n            {{~it.list:item:index}}\n            <li>\n                <a class="pic" href="{{=item.item_url}}" target="_blank">\n                    <img class="lazy" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif" data-original="{{=__CUtil.getImgThumbnailUrl(item.image, 220, 330)}}">\n                </a>\n                <a class="title" href="{{=item.item_url}}" target="_blank">{{=item.title}}</a>\n                <div class="info">\n                    <div class="price">\n                        <em class="price-u">\xa5</em>\n                        <span class="price-n">{{=item.discountPrice}}</span>\n                    </div>\n                    <div class="fav">\n                        <em class="fav-i"></em>\n                        <span class="fav-n">{{=item.itemLikes}}</span>\n                    </div>\n                </div>\n            </li>\n            {{~}}\n        </ul>\n    </div>\n</div>\n{{?}}';
},function(t,e,i){var n,a,s=i(4),o=(i(27),i(30));n=[],a=function(){var t={_defaults:{events:{loading:function(t){},loaded:function(t){}}},settings:null,$container:null,itemId:null,moduleData:null,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getAjaxParam:function(){return{url:"/ajax/mgj.pc.detailinfo/v1",type:"get",dataType:"json",data:{_ajax:1,itemId:this.itemId}}},_initElem:function(){this.$container=$("#J_ModuleGraphic")},_initData:function(){var t=this;t.itemId=s.getItemId();var e=$.extend(!0,{},this._getAjaxParam(),{});t._trigger("loading",{}),$.ajax(e).done(function(e){return e.success?(t.moduleData=e.data,t._render(),t._events(),void t._trigger("loaded",{moduleData:e.data})):void console.log("\u56fe\u6587\u8be6\u60c5\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+e.message)}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload(),"\u7f8e\u4e3d\u4f18\u9009"==$(".shop-name .name").html()||"\u6211\u7684\u5fc3\u613f\u662f\u4e16\u754c\u548c\u5e73"==$(".shop-name .name").html()?($(".graphic-pic").css("margin-bottom","-1px"),$(".graphic-pic .pic-box").css("padding-top","0px"),$("#J_Graphic_\u4ea7\u54c1\u53c2\u6570").hide(),$(".graphic-pic-hf").show()):setTimeout(function(){$('[data-module="J_Graphic_\u4ea7\u54c1\u53c2\u6570"]').show()},300)},_events:function(){var t=$("#J_ParameterTable");t.off(".more").on("click.more","a.more",function(){var t=$(this),e=t.parent("td");$curTR=e.parent("tr"),$nextTRs=$curTR.nextAll("tr.ui-none"),e.text(function(){return t.data("text")}),$nextTRs.removeClass("ui-none")})},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u56fe\u6587\u8be6\u60c5 -->\n<!-- \n    \u6ce8\uff1aPHP\u6a21\u677f\u8d70\u7684\u662f\u672c\u5730\u6a21\u677f\u6587\u4ef6\uff1aviews/modules/module-graphic.php\n-->\n\n<!-- \u5546\u54c1\u63cf\u8ff0 -->\n{{?it.detailInfos && it.detailInfos.desc}}\n  <div id="J_Graphic_desc">\n      <div class="panel-title">\n          <h1>\u5546\u54c1\u63cf\u8ff0</h1>\n      </div>\n      <!-- \u63cf\u8ff0 -->\n      {{?it.detailInfos.desc}}\n      <div class="graphic-text">{{=it.detailInfos.desc}}</div>\n      {{?}}\n  </div>\n{{?}}\n\n<!-- \u4ea7\u54c1\u53c2\u6570 -->\n{{?it.itemParams && it.itemParams.info}}\n  <div id="J_Graphic_{{=it.itemParams.info.key}}">\n      <div class="panel-title">\n          <h1>{{=it.itemParams.info.key}}</h1>\n      </div>\n      <!-- \u4ea7\u54c1\u53c2\u6570 -->\n      <div class="graphic-block">\n            <!-- \u63cf\u8ff0 -->\n           {{?it.itemParams.info.desc}}\n             <div class="graphic-text">{{=it.itemParams.info.desc}}</div>\n           {{?}}\n         \n          {{?it.itemParams.info.set && it.itemParams.info.set.length > 0}}\n          <!-- \u8868\u683c -->\n            <table class="parameter-table" id="J_ParameterTable">\n                <tbody>\n                {{~it.itemParams.info.set:data:index}}\n                  \n                  {{?index % 3 == 0}}\n                    <tr class="{{?index >= 18}}ui-none{{?}}">\n                  {{?}}\n                  \n                    {{?index == 17}}\n                      <td><a class="more" href="javascript:;" data-text="{{=data.key}}: {{=data.value}}">\u66f4\u591a\u53c2\u6570<i></i></a></td>\n                    {{??}}\n                      <td>{{=data.key}}: {{=data.value}}</td>\n                    {{?}}\n                    \n                  {{?index % 3 == 2 || index == it.itemParams.info.set.length - 1}}\n                    </tr>\n                  {{?}}\n                  \n                {{~}}\n                </tbody>\n            </table>\n          {{?}}\n          \n          {{?it.itemParams.info.images && it.itemParams.info.images.length > 0}}\n                <!-- \u56fe\u7247\u5217\u8868 -->\n                {{~it.itemParams.info.images:imgURL}}\n                  {{\n                    var imgSize = __CUtil.getImgSize(imgURL, 700);\n                    var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n                  }}\n                    <div class="graphic-pic">\n                        <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                            <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                        </div>\n                    </div>\n                {{~}}\n          {{?}}\n      </div>\n  </div>\n{{?}}\n\n<!-- \u6a21\u5757\u7ea7\u522b -->\n{{?it.detailInfos}}\n  <div class="graphic-block">\n    {{?it.detailInfos.detailImage && it.detailInfos.detailImage.length > 0}}\n      <!-- \u56fe\u7247\u5217\u8868 -->\n      {{~it.detailInfos.detailImage:image}}\n        <div id="J_Graphic_{{=image.key}}">\n            <div class="panel-title">\n                <h1>{{=image.key}}</h1>\n            </div>\n            <!-- \u63cf\u8ff0 -->\n            {{?image.desc}}\n               <div class="graphic-text">{{=image.desc}}</div>\n            {{?}}\n              {{~image.list:imgURL}}\n                {{\n                  var imgSize = __CUtil.getImgSize(imgURL, 700);\n                  var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n                }}\n                \n                <div class="graphic-pic">\n                    <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                        <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                    </div>\n                </div>\n                {{~}}\n         </div>\n      {{~}}\n    {{?}}\n  </div>\n{{?}}\n\n<!-- \u5c3a\u7801\u8bf4\u660e -->\n{{?it.itemParams && it.itemParams.rule}}\n  <div id="J_Graphic_{{=it.itemParams.rule.key}}">\n      <div class="panel-title">\n          <h1>{{=it.itemParams.rule.key}}</h1>\n      </div>\n      <!-- \u5c3a\u7801\u8bf4\u660e -->\n      <div class="graphic-block">\n\n          <!-- \u63cf\u8ff0 -->\n          {{?it.itemParams.rule.desc}}\n             <div class="graphic-text">{{=it.itemParams.rule.desc}}</div>\n          {{?}}\n\n          <!-- \u8868\u683c -->\n          {{?it.itemParams.rule.tables && it.itemParams.rule.tables.length > 0}}\n            <table class="size-table">\n                {{~it.itemParams.rule.tables:data:index}}\n                      <thead>\n                          {{~data:key:index}}\n                            {{?index == 0}}  \n                                <tr>\n                                    {{~key:item}}\n                                    <td>{{=item}}</td>\n                                    {{~}}\n                                </tr>\n                              {{?}}\n                          {{~}}\n                      </thead>\n                      <tbody>\n                          {{~data:key:index}}\n                              {{?index >= 1}}\n                                  <tr>\n                                      {{~key:item}}\n                                      <td>{{=item}}</td>\n                                      {{~}}\n                                  </tr>\n                              {{?}}\n                          {{~}}\n                      </tbody>\n                {{~}}\n            </table>\n          {{?}}\n          \n          {{?it.itemParams.rule.images && it.itemParams.rule.images.length > 0}}\n            <!-- \u56fe\u7247\u5217\u8868 -->\n            {{~it.itemParams.rule.images:imgURL}}\n              {{\n                var imgSize = __CUtil.getImgSize(imgURL, 700);\n                var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n              }}\n              <div class="graphic-pic">\n                  <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                      <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                  </div>\n              </div>\n            {{~}}\n          {{?}}\n          \n          \n\n          <!-- \u63d0\u9192 -->\n          {{?it.itemParams.rule.disclaimer}}\n             <div class="size-text">{{=it.itemParams.rule.disclaimer}}</div>\n          {{?}}\n\n          {{?it.itemParams.info && it.itemParams.info.images && it.itemParams.info.images.length > 0}}\n                <!-- \u56fe\u7247\u5217\u8868 -->\n                {{~it.itemParams.info.images:imgURL}}\n                  {{\n                    var imgSize = __CUtil.getImgSize(imgURL, 700);\n                    var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n                  }}\n                    <div class="graphic-pic graphic-pic-hf" style="display:none">\n                        <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                            <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                        </div>\n                    </div>\n                {{~}}\n          {{?}}\n      </div>\n  </div>\n{{?}}\n\n'},function(t,e,i){var n,a,s=i(4),o=(i(32),i(33));window.log_stat_url_tmp=window.log_stat_url_tmp||"",n=[],a=function(){var t={$ratesBuyerBox:null,$ratesBuyerList:null,postParams:{pageSize:20,sort:1,isNewDetail:1,itemId:s.getItemId(),type:1,marketType:"market_meilishuo"},init:function(){this._initElem(),this.showImg(),this.switchTags(),this.switchPage(),this.switchExplain(),this.getComments(),this.showComments()},_initElem:function(){this.$ratesBuyerBox=$("#J_RatesBuyer"),this.$ratesBuyerList=$("#J_RatesBuyerList")},_render:function(t,e){var i=t.data||{},n=this.$ratesBuyerList,a=MoGu.ui.getTemplate(o,i);n.html(a);var s=i.extra||{};if(s&&s.totalPages>1){var r={page:"__id__"},l=$.extend(!0,{},e||{},r),c=$.map(l,function(t,e){return[e,t].join("=")}).join("&"),d="http://rate.meilishuo.com/jsonp/pc.rate.ratelist/v1?"+c;$(".pagination",n).pagination(10*s.totalPages,{current_page:Number(s.currentPage||1)-1,num_display_entries:5,num_edge_entries:1,prev_text:"<",next_text:"\u4e0b\u4e00\u9875>",link_to:d,callback:function(){return!0}})}},showImg:function(){$(document).on("click",".show-img li",function(){var t=$(this).closest(".show-img"),e=t.find(".big-img"),i=$(this).find("img")[0].src;$(this).hasClass("c")?($(this).removeClass("c"),e.removeClass("c").slideUp()):($(this).addClass("c").siblings().removeClass("c"),e.find("img").attr("src",i.replace("100x100","468x468")),e.addClass("c").slideDown())}).on("click",".show-img .big-img",function(){$(this).hasClass("c")?($(this).removeClass("c").slideUp(),$(this).closest(".show-img").find("li").removeClass("c")):$(this).slideDown()})},switchTags:function(){var t=this,e=t.$ratesBuyerBox;e.on("click",".tags a",function(){e.find(".nav a").removeClass("c"),$(this).hasClass("c")?($(this).removeClass("c"),delete t.postParams.emotion,delete t.postParams.property):($(this).addClass("c").siblings("a").removeClass("c"),t.postParams.emotion=$(this).attr("data-emotion"),t.postParams.property=$(this).attr("data-property"),delete t.postParams.isImg),MOGU&&MOGU.Globe_Trace_Log("shop-detail-comment-tags"),t.getComments()}).on("click",".tags .all",function(){var t=$(this).closest(".tags"),e=t.find(".list");$(this).find("b").toggleClass("c"),e.hasClass("show")?e.removeClass("show"):e.addClass("show")})},switchPage:function(){var t=this,e=t.$ratesBuyerBox;t.$ratesBuyerList;e.on("click",".pagination a",function(i){i.preventDefault();var n=$(this).attr("href");if(n&&""!=n){var a=$.extend(!0,{},t.postParams||{});$.ajax({url:n,type:"GET",dataType:"jsonp",data:{isNewDetail:1}}).done(function(i){i.success&&(t._render(i,a),s.goToTabPosition(e))})}})},switchExplain:function(){var t=this,e=t.$ratesBuyerBox,i=['<div class="info-z seller-explain clearfix">','<span class="fl">\u5546\u5bb6\u56de\u590d\uff1a</span>','<div class="content">',"{{=it.content}}","</div>",'<span class="date fr">{{=it.date}}</span>',"</div>"].join("");e.on("click",".show-explain",function(){$(this).closest(".item").find(".explain-box").show()}).on("click",".explain-submit",function(){var t={},e=$(this).closest(".item");return t.rateId=$(this).attr("data-id"),t.comment=$.trim(e.find(".explain-text").val()),""==t.comment?void $.alert("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9"):(t.isNewDetail=1,void $.ajax({url:"/trade/rate/explain",type:"POST",dataType:"JSON",data:t}).done(function(n){null==n?alert(MGLANG.msgTimeout):1001==n.status.code?(e.find(".show-explain").remove(),e.find(".explain-box").after(MoGu.ui.getTemplate(i,{content:t.comment,date:n.result.date})).remove()):alert(n.status.msg)}))})},getComments:function(){var t=this,e=t.$ratesBuyerList,i=$.extend(!0,{},t.postParams||{});0!=e.length&&$.ajax({url:"http://rate.meilishuo.com/jsonp/pc.rate.ratelist/v1",type:"GET",data:t.postParams,dataType:"jsonp",success:function(e){e.success&&t._render(e,i)}})},showComments:function(){var t=this,e=t.$ratesBuyerBox;e.on("click",".nav a:not(.disable)",function(){e.find(".tags a").removeClass("c"),$(this).hasClass("c")||($(this).addClass("c").siblings("a").removeClass("c"),"img"==$(this).attr("data-type")?t.postParams.isImg=1:delete t.postParams.isImg,delete t.postParams.emotion,delete t.postParams.property,t.getComments())}).on("click",".J_CommentSort",function(){t.postParams.sort=$(this).attr("data-type"),MOGU&&MOGU.Globe_Trace_Log(1==t.postParams.sort?"shop-detail-comment-sort-default":"shop-detail-comment-sort-time"),t.getComments()})}},e={$ratesOrderBox:null,$ratesOrderList:null,switchPage:function(){var t=this,e=t.$ratesOrderBox,i=t.$ratesOrderList;e.on("click",".pagination a",function(t){t.preventDefault();var n=$(this).attr("href");n&&""!=n&&$.ajax({url:n,type:"POST",dataType:"JSON",data:{isNewDetail:1}}).done(function(t){null==t?alert(MGLANG.msgTimeout):1001==t.status.code?(i.html(t.result.html),s.goToTabPosition(e)):alert(t.status.msg)}).fail(function(){}).always(function(){})})},getSales:function(){},_initElem:function(){this.$ratesOrderBox=$("#J_RatesOrder"),this.$ratesOrderList=$("#J_RatesOrderList")},init:function(){this._initElem(),this.switchPage()}};return{init:function(){t.init(),e.init()}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){"use strict";jQuery.fn.pagination=function(t,e){return e=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},e||{}),this.each(function(){function i(){return Math.ceil(t/e.items_per_page)}function n(){var t=Math.ceil(e.num_display_entries/2),n=i(),a=n-e.num_display_entries,s=o>t?Math.max(Math.min(o-t,a),0):0,r=o>t?Math.min(o+t,n):Math.min(e.num_display_entries,n);return[s,r]}function a(t,i){o=t,s();var n=e.callback(t,r);return n||(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0),n}function s(){r.empty();var t=n(),a=i(),s=function(t,i){if(t=0>t?0:a>t?t:a-1,i=jQuery.extend({text:t+1,classes:""},i||{}),t==o){if(i.text==e.prev_text||i.text==e.next_text)return;var n=jQuery("<a class='c'>"+i.text+"</a>")}else var n=jQuery("<a>"+i.text+"</a>").attr("rel","nofollow").attr("href",e.link_to.replace(/__id__/,t+1));i.classes&&n.addClass(i.classes),r.append(n)};if(e.prev_text&&(o>0||e.prev_show_always)&&s(o-1,{text:e.prev_text,classes:""}),t[0]>0&&e.num_edge_entries>0){for(var l=Math.min(e.num_edge_entries,t[0]),c=0;l>c;c++)s(c);e.num_edge_entries<t[0]&&e.ellipse_text&&jQuery("<i>"+e.ellipse_text+"</i>").appendTo(r)}for(var c=t[0];c<t[1];c++)s(c);if(t[1]<a&&e.num_edge_entries>0){a-e.num_edge_entries>t[1]&&e.ellipse_text&&jQuery("<i>"+e.ellipse_text+"</i>").appendTo(r);for(var d=Math.max(a-e.num_edge_entries,t[1]),c=d;a>c;c++)s(c)}e.next_text&&(a-1>o||e.next_show_always)&&s(o+1,{text:e.next_text,classes:""})}var o=e.current_page;t=!t||0>t?1:t,e.items_per_page=!e.items_per_page||e.items_per_page<0?1:e.items_per_page;var r=jQuery(this);this.selectPage=function(t){a(t)},this.prevPage=function(){return o>0?(a(o-1),!0):!1},this.nextPage=function(){return o<i()-1?(a(o+1),!0):!1},s(),e.callback(o,this)})}},function(t,e){t.exports='<!--\u8be6\u60c5\u9875\u4ea4\u6613\u8bc4\u4ef7\u5217\u8868-->\n{{?it.list && it.list.length > 0}}\n  {{~it.list :item: index}}\n    <div class="item clearfix" data-id="{{=item.id}}">\n        <div class="info">\n            <div class="info-w">\n                <!-- \u8bc4\u4ef7\u7528\u6237\u3001\u65f6\u95f4 -->\n                <div class="info-t clearfix">\n                    {{?item.userInfo && item.userInfo.uname}}\n                    <span class="name">{{=item.userInfo.uname}}</span>\n                    {{?}}\n                    <span class="date">{{=item.formatDate || \'\'}}</span>\n                </div>\n                \n                <!-- \u8bc4\u4ef7\u5185\u5bb9 -->\n                <div class="info-m">{{=(item.content || \'\').replace(/\u8611\u83c7\u8857/g,\'\u7f8e\u4e3d\u8bf4\')}}</div>\n                \n                <!-- \u5546\u54c1\u5c5e\u6027 -->\n                <div class="info-b clearfix">\n                    {{?item.stock}}\n                      {{~item.stock :text}}\n                      <span>{{=text}}</span>\n                      {{~}}\n                    {{?}}\n                    \n                    {{?it.isCanExplain && item.canExplain}}\n                    <a href="javascript:;" class="show-explain">\u5546\u5bb6\u56de\u590d</a>\n                    {{?}}\n                    <!-- <a href="http://www.mogujie.com/apps" target="_blank" class="from-ios shop-detail-icons comment-mt">\u6765\u81eaiOS\u5ba2\u6237\u7aef</a> -->\n                    <!-- <a href="http://www.mogujie.com/apps" target="_blank" class="from-android shop-detail-icons comment-mt">\u6765\u81eaAndroid\u5ba2\u6237\u7aef</a> -->\n                </div>\n\n                <!-- \u5546\u5bb6\u56de\u590d\u8f93\u5165 -->\n                {{?it.isCanExplain && item.canExplain}}\n                <div class="info-e explain-box clearfix">\n                    <input type="text" class="explain-text"><a href="javascript:;" class="explain-submit" data-id="{{=item.id}}">\u786e\u5b9a</a>\n                </div>\n                {{?}}\n\n                <!-- \u6652\u56fe S -->\n                {{?item.images && item.images.length > 0}}\n                <div class="info-k show-img">\n                    <ul class="list clearfix">\n                        {{~item.images :image}}\n                        <li>\n                            <div class="img-box">\n                                <span>\n                                    <img src="{{=__CUtil.getImgThumbnailUrl(image, 100 ,100)}}" width="40">\n                                </span>\n                            </div>\n                        </li>\n                        {{~}}\n                    </ul>\n                    <div class="big-img">\n                        <div class="img-box">\n                            <span>\n                                <img src="about:blank" height="400">\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                {{?}}\n                <!-- \u6652\u56fe E -->\n\n                {{var _append = item.append;}}\n                {{?_append}}\n  				        <div class="info-l"></div>\n                  <!-- \u8ffd\u52a0\u8bc4\u4ef7 -->\n                  <div class="info-z clearfix">\n                      <span class="fl">\u8ffd\u52a0\u8bc4\u4ef7\uff1a</span>\n                      <div class="content">{{=_append.content || \'\'}}</div>\n                      <span class="date fr">\u786e\u8ba4\u6536\u8d27\u540e{{=_append.formatDate || \'\'}}\u8ffd\u52a0</span>\n                  </div>\n                  {{?_append.images && _append.images.length}}\n                  <div class="info-k show-img">\n                      <ul class="list clearfix">\n                          {{~_append.images :image}}\n                          <li>\n                              <div class="img-box">\n                                  <span>\n                                      <img src="{{=__CUtil.getImgThumbnailUrl(image, 100, 100)}}" width="40">\n                                  </span>\n                              </div>\n                          </li>\n                          {{~}}\n                      </ul>\n                      <div class="big-img">\n                          <span>\n                              <img src="about:blank" height="400">\n                          </span>\n                      </div>\n                  </div>\n                  {{?}}\n                {{?}}\n\n        				{{var _explain = item.explain;}}\n                {{?_explain}}\n        				<!-- \u5546\u5bb6\u56de\u590d -->\n        				<div class="info-z seller-explain clearfix">\n          					<span class="fl">\u5546\u5bb6\u56de\u590d\uff1a</span>\n          					<div class="content">{{=_explain.content}}</div>\n          					<span class="date fr">{{=_explain.formatDate}}</span>\n        				</div>\n        				{{?}}\n            </div>\n        </div>\n        <div class="face">\n          {{?item.userInfo && item.userInfo.avatar}}\n            <img src="{{=__CUtil.getImgThumbnailUrl(item.userInfo.avatar, 64, 64)}}">\n          {{?}}\n        </div>\n    </div>\n  {{~}}\n{{?}}\n    \n<div class="pagination"></div>\n'},function(t,e,i){var n,a,s=i(17),o=i(4),r=(i(27),i(35));n=[],a=function(){var t=window.M&&M.MWP||MoGu&&MoGu.MWP||window.MWP||null,e={_defaults:{events:{loading:function(t){},loaded:function(t){}}},settings:null,$container:null,shopId:null,itemId:null,moduleData:null,_isLoaded:!1,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getAjaxParam:function(){var t=7123;return{url:"http://mcebackup.mogucdn.com/jsonp/get/3%3Fpid="+t+"%26callback=jsonp"+t+"backup",type:"get",dataType:"jsonp",jsonpCallback:"jsonp"+t+"backup",data:{iidE:this.itemId,pid:t,plat:"pc",pageSize:16}}},_initElem:function(){this.$container=$("#J_ModuleRecommend")},_initData:function(){var e=this;this.shopId=o.getShopId(),this.itemId=o.getItemId();var i=$.extend(!0,{},this._getAjaxParam(),{});e._trigger("loading",{}),t&&t.request("mwp.darwin.get","3",{iidE:this.itemId,pid:7123,plat:"pc",pageSize:16}).then(function(i){if(i){if(i.ret!==t.Code.Success)return void console.log("\u672c\u5e97\u540c\u7c7b\u5546\u54c1\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+i.message);e.moduleData=i.data,e._render(),e._events();var n=i.data.list||[];s.recommender(n),e._trigger("loaded",{})}})["catch"](function(){$.ajax(i).done(function(t){if(t){if(!t.success)return void console.log("\u672c\u5e97\u540c\u7c7b\u5546\u54c1\u63a5\u53e3\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff1a"+t.message);e.moduleData=t.data,e._render(),e._events();var i=t.data.list||[];s.recommender(i),e._trigger("loaded",{})}}).fail(function(){})})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload()},_events:function(){},_initEvent:function(){var t=this,e=$(window),i=$("#J_ModuleTabpanel");i.length&&e.off(".m-recommend").on("scroll.m-recommend",function(){var n=e.scrollTop()+e.height();!t._isLoaded&&n>i.offset().top&&(t._isLoaded=!0,e.off(".m-recommend"),t._initData())})},init:function(t){this.__init||(this.__init=!0,this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initEvent())}};return e}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u672c\u5e97\u540c\u7c7b\u5546\u54c1 -->\n<!-- \n    \u6ce8\uff1aPHP\u6a21\u677f\u8d70\u7684\u662f\u672c\u5730\u6a21\u677f\u6587\u4ef6\uff1aviews/modules/module-recommend.php\n-->\n\n<!-- \u672c\u5e97\u540c\u7c7b\u5546\u54c1\u5217\u8868 -->\n<div id="J_RecommendList">\n    <div class="panel-title recommend-title">\n        <h1>\u672c\u5e97\u540c\u7c7b\u5546\u54c1</h1>\n    </div>\n    {{?it.list && it.list.length > 0}}\n    <!-- \u672c\u5e97\u540c\u7c7b\u5546\u54c1\u5217\u8868 -->\n    <div class="recommend-list">\n        <!-- \u5217\u8868 -->\n        <ul>\n            {{~it.list:item:index}}\n            <li>\n                <a class="pic" href="{{=item.item_url}}" target="_blank">\n                    <img class="lazy" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif" data-original="{{=__CUtil.getImgThumbnailUrl(item.image, 220, 330)}}">\n                </a>\n                <a class="title" href="{{=item.item_url}}" target="_blank">{{=item.title}}</a>\n                <div class="info">\n                    <div class="price">\n                        <em class="price-u">\xa5</em>\n                        <span class="price-n">{{=item.discountPrice}}</span>\n                    </div>\n                    <div class="fav">\n                        <em class="fav-i"></em>\n                        <span class="fav-n">{{=item.itemLikes}}</span>\n                    </div>\n                </div>\n            </li>\n            {{~}}\n        </ul>\n    </div>\n    {{??}}\n    <div class="module-empty" style="margin-bottom: 40px;">\u6682\u65e0\u672c\u5e97\u540c\u7c7b\u5546\u54c1</div>\n    {{?}}\n</div>'},function(t,e,i){var n,a,s=i(4),o=i(37);n=[],a=function(){var t={$win:null,$container:null,moduleData:null,positionData:[],tabBarHeight:59,_initData:function(t){this.moduleData=$.extend(!0,{},t||{}),this.moduleData.__={hasRecommend:this._getHasRecommend()}},_initElem:function(){this.$win=$(window),this.$container=$("#J_ModuleExtranav .extranav-bd"),this._render()},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),this._defaultSelected(),this._graphicPosition()},_defaultSelected:function(){$("li[data-module]:first",this.$container).addClass("selected")},_getHasRecommend:function(){var t=s.getPageTypeIsSeckill();return!t},_events:function(){var t=this;$(".extranav-list",this.$container).off(".nav").on("click.nav","li",function(){t._eventGoTo(this)}),t.$win.off(".extranav-follow").on("scroll.extranav-follow",function(){t._eventFollow()}),t._eventFollow()},_eventFollow:function(){for(var t=this,e=t.$win.scrollTop(),i=null,n=t.positionData.length-1;n>=0;n--)if(i=t.positionData[n],!(e+t.tabBarHeight<i.top)){if(t.__curModuleId==i.moduleId)break;t.__curModuleId=i.moduleId;var a=$('.extranav-list li[data-module="'+i.moduleId+'"]',t.$container);a.addClass("selected").siblings("li").removeClass("selected");break}},_eventGoTo:function(t){var e=$(t),i=$("#"+e.data("module"));return e.addClass("selected").siblings("li").removeClass("selected"),0!=i.length&&s.goToTabPosition(i),!1},_graphicPosition:function(){var t=this,e=$(".extranav-list li",this.$container),i=e.map(function(){return $(this).data("module")});$.map(i,function(e,i){t._addPositonDataByModuleId(e)})},_addPositonDataByModuleId:function(t){var e=$("#"+t);if(0!=e.length){var i=e.offset().top;this.positionData.push({moduleId:t,top:i})}},addPositonDataForRecommend:function(){this.__init&&0!=this.positionData.length&&this._addPositonDataByModuleId("J_RecommendList")},init:function(t){this.__init||(this.__init=!0,this._initData(t),this._initElem(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u6a21\u5757-\u6269\u5c55\u5bfc\u822a\u680f -->\n<!-- \n    \u6ce8\uff1aPHP\u6a21\u677f\u8d70\u7684\u662f\u672c\u5730\u6a21\u677f\u6587\u4ef6\uff1aviews/modules/module-extranav.php\n-->\n\n<!-- \u5b50\u5bfc\u822a\u5217\u8868 -->\n<ul class="extranav-list">\n    \n    <!-- \u5546\u54c1\u63cf\u8ff0 -->\n    {{?it.detailInfos && it.detailInfos.desc}}\n    <li data-module="J_Graphic_desc">\n        <a href="javascript:;">\u5546\u54c1\u63cf\u8ff0</a>\n    </li>\n    {{?}}\n\n    <!-- \u4ea7\u54c1\u53c2\u6570 -->\n    {{?it.itemParams && it.itemParams.info}}\n    <li data-module="J_Graphic_{{=it.itemParams.info.key}}" style="display:none">\n        <a href="javascript:;">{{=it.itemParams.info.key}}</a>\n    </li>\n    {{?}}\n\n    <!-- \u6a21\u5757\u5217\u8868 -->\n    {{?it.detailInfos && it.detailInfos.detailImage && it.detailInfos.detailImage.length > 0}}\n      {{~it.detailInfos.detailImage:image}}\n      <li data-module="J_Graphic_{{=image.key}}">\n          <a href="javascript:;">{{=image.key}}</a>\n      </li>\n      {{~}}\n    {{?}}\n\n    <!-- \u5c3a\u7801\u8bf4\u660e -->\n    {{?it.itemParams && it.itemParams.rule}}\n    <li data-module="J_Graphic_{{=it.itemParams.rule.key}}">\n        <a href="javascript:;">{{=it.itemParams.rule.key}}</a>\n    </li>\n    {{?}}\n    \n    {{?it.__.hasRecommend}}\n    <!-- \u672c\u5e97\u540c\u7c7b\u5546\u54c1 -->\n    <li data-module="J_RecommendList">\n        <a href="javascript:;">\u5546\u54c1\u63a8\u8350</a>\n    </li>\n    {{?}}\n\n</ul>\n'},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={$container:null,itemId:null,_initElem:function(){this.$container=$("#J_ModuleCart")},_initData:function(){this.itemId=s.getItemId()},_add:function(){$(window).scrollTop(function(){return $(".shop-detail").offset().top}),$("#J_BuyCart:visible").trigger("click"),$(".J_PannelOK:visible").eq(0).trigger("click")},_events:function(){$(".cart-name",this.$container).on("click",this._add)},init:function(){this._initElem(),this._initData(),this._events()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4),o=i(40),r=i(41),l=i(42);n=[],a=function(){var t={$container:null,itemId:null,rushId:null,moduleData:{state:0,countdown:0,__buy:null},_initData:function(){this.itemId=s.getItemId(),this.rushId=s.getRushId(),this.moduleData=$.extend(!0,{},this.moduleData,s.getRushData()||{}),this.moduleData.__buy={state:this._getBuyState(this.moduleData.state)}},_initElem:function(){this.$container=$("#J_ModuleRushBuy"),this._beforeFiveMinu(),this._updateCountDown()},_render:function(){var t=this;t.$container.html(function(){return MoGu.ui.getTemplate(r,t.moduleData)})},_beforeFiveMinu:function(){var t=this,e=t.moduleData;if(0==e.state){var i=e.countdown;if(300>=i)return void t._updateForState(4);clearInterval(t.timer),t.timer=setInterval(function(){i-=1,300>=i&&(clearInterval(t.timer),t._updateForState(4))},1e3)}},_updateCountDown:function(){function t(){return i&&i.length?i:$('span[data-type="countdown"]',e.$container)}var e=this,i=null,n=e.moduleData.__buy,a=e.moduleData.countdown;0>a||3==n.state||(o.init({timeStamp:a,events:{loop:function(e){t().html(e.content)},done:function(t){1==n.state||2==n.state?e._updateForState(3):location.href=s.getUrlWithPtp(location.href)}}}),o.start())},_getRefreshParam:function(){var t={url:"/trade/item_detail/rushrefresh?rushid="+this.rushId,type:"get",dataType:"text",data:{_ajax:1}};return s.getQueryString("_state")&&(t.data._state=s.getQueryString("_state")),s.getQueryString("_countdown")&&(t.data._countdown=s.getQueryString("_countdown")),t},_refresh:function(t){function e(t){if(2==t||4==t){var e=i.__waitMilliseconds-1e3;e>0?(i._updateForState(t),i.__isRefresh=!1):(clearTimeout(i.__timer1),i.__timer1=setTimeout(function(){i._updateForState(t),i.__isRefresh=!1},Math.abs(e)))}else i._updateForState(t),i.__isRefresh=!1}var i=this,n=t.data("state");if(!i.__isRefresh){i.__isRefresh=!0,i.__waitMilliseconds=0,clearInterval(i.__timer2),i.__timer2=setInterval(function(){i.__waitMilliseconds+=100,i.__waitMilliseconds>1e3&&clearInterval(i.__timer2)},100),t.addClass("buy-loading").html("<em>\u6b63\u5728\u5237\u65b0<i></i></em>");var a=$.extend(!0,i._getRefreshParam(),{});$.ajax(a).done(function(t){try{t=JSON.parse(t.replace(/\\"/gim,'"')),console.log("esi \u66f4\u65b0\u6570\u636e\u5982\u4e0b\uff1a"),
console.log(t)}catch(a){}if("string"==typeof t)return void e(n);if(1001==t.status.code){var o=t.result,r=i._getBuyState(o.state);0==r&&o.countdown<=300?e(4):1==r?location.href=s.getUrlWithPtp(location.href):e(r)}else e(n),$.alert(t.result||t.status.msg,2e3)}).fail(function(){e(n)})}},_updateForState:function(t){var e=this,i=e.moduleData,n=i.__buy;n.state=t,e.$container.html(function(){return MoGu.ui.getTemplate(r,i)}),3!=t&&o.update()},_getBuyState:function(t){switch(t){case 0:return 0;case 1:return 1;case 4:return 2;case 2:case 3:return 3;default:return t}},_events:function(){var t=this;t.$container.on("rushbuy",'a[data-type="buynow"]',function(){var e=$(this),i=e.data("params"),n={callback:function(){e.trigger("rushbuy")}};e.hasClass("buy-disabled")||s.isLogin(n)&&t._buyOrder(i)}),t.$container.off(".rf").on("click.rf",'a[data-type="refresh"]',function(){t._refresh($(this))})},_buyOrder:function(t){var e=this,i={rushId:e.rushId,skuId:t.id};e.__isAjaxOrder||(e.__isAjaxOrder=!0,$.ajax({url:"/rush/buy",type:"post",dataType:"json",data:i}).done(function(i){i&&(1001==i.status.code?(e._showProcessBox(),e._checkResult(t)):$.alert(i.result||i.status.msg,1e3))}).fail(function(){$.alert("\u5f88\u62b1\u6b49\uff0c\u62a2\u8d2d\u5931\u8d25\uff01",1e3)}).always(function(){e.__isAjaxOrder=!1}))},_showProcessBox:function(){var t={title:" ",lightBoxId:"J_RushProcessBox",contentHtml:l,scroll:!1,isBgClickClose:!1},e=new MGLightBox(t);e.init(),$("#J_RushProcessBox").find(".lb_hd").remove()},_checkResult:function(t){function e(){$("#J_RushProcessBox").remove(),clearInterval(n),a.__isAjaxCheck=!1}var i,n,a=this,o=0;a.__isAjaxCheck||(a.__isAjaxCheck=!0,n=setInterval(function(){i?e():$.ajax({url:"/rush/fetch_result",type:"POST",dataType:"json",data:{iid:a.itemId,rushId:a.rushId,skuId:t.id}}).done(function(t){1001==t.status.code?t.result&&t.result.orderId?(i=t.result.orderId,location.href=s.getUrlWithPtp("http://www.mogujie.com/trade/orderpay/index?orderId="+t.result.orderId)):(o+=1,o>=5&&(e(),$.alert("\u5f88\u62b1\u6b49\uff0c\u62a2\u8d2d\u5931\u8d25\uff01"))):(e(),$.alert(t.result.msg||t.status.msg))}).fail(function(){e(),$.alert("\u5f88\u62b1\u6b49\uff0c\u62a2\u8d2d\u5931\u8d25\uff01")})},2e3))},init:function(){s.getPageTypeIsRush()&&(this._initData(),this._initElem(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(4);n=[],a=function(){var t={_defaults:{timeStamp:0,events:{loop:function(t){},done:function(t){}}},settings:null,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getContentForRush:function(t){var e,i,n,a,t=t||this.settings.timeStamp;e=t/86400>>>0,i=(t/3600>>>0)-24*e,n=(t/60>>>0)-60*(24*e+i),a=t-60*(60*(24*e+i)+n),e&&(i+=24*e),i=10>i?"0"+i:i,n=10>n?"0"+n:n,a=10>a?"0"+a:a;var s=[i+"\u65f6",n+"\u5206",a+"\u79d2"];return s.join("")},_getContent:function(){return s.getPageTypeIsRush()?this._getContentForRush():""},update:function(){this.__isStart&&this._trigger("loop",{content:this._getContent()})},start:function(){var t=this,e=t.settings;t.__isStart||(t.__isStart=!0,t._timer=setInterval(function(){e.timeStamp=e.timeStamp-1,e.timeStamp<0?(clearInterval(t._timer),t.__isStart=!1,t._trigger("done",{content:""})):t._trigger("loop",{content:t._getContent()})},1e3),t._trigger("loop",{content:t._getContent()}))},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{})}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u5feb\u62a2\u8d2d\u4e70 -->\n\n{{?it.__buy.state == 0}}\n<!-- \u672a\u5f00\u59cb -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">\u5373\u5c06\u5f00\u62a2</a>\n<span class="countdown">{{=it.tip.start}}<span data-type="countdown">0\u65f60\u52060\u79d2</span></span>\n\n{{??it.__buy.state == 1}}\n<!-- \u5df2\u5f00\u59cb -->\n<a href="javascript:;" data-type="buynow" class="fl mr20 buy-now buy-btn">\u7acb\u5373\u62a2\u8d2d</a>\n<span class="countdown">{{=it.tip.end}}<span data-type="countdown">0\u65f60\u52060\u79d2</span></span>\n\n{{??it.__buy.state == 2}}\n<!-- \u5e93\u5b58\u4e3a0\uff0c\u8fd8\u6709\u672a\u4ed8\u6b3e\uff08\u5b9e\u9645\u72b6\u6001\u4e3a4\uff09 -->\n<a href="javascript:;" data-type="refresh" class="fl mr20 buy-now buy-btn buy-refresh" data-state="2"><em>\u8fd8\u6709\u673a\u4f1a,\u70b9\u51fb\u5237\u65b0<i></i></em></a>\n<span class="countdown">{{=it.tip.end}}<span data-type="countdown">0\u65f60\u52060\u79d2</span></span>\n\n{{??it.__buy.state == 3}}\n<!-- \u62a2\u8d2d\u7ed3\u675f\uff08\u5b9e\u9645\u72b6\u6001\u4e3a2\uff0c3\uff09 -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">\u62a2\u8d2d\u7ed3\u675f</a>\n\n{{??it.__buy.state == 4}}\n<!-- \u8ddd\u5f00\u59cb\u8fd8\u6709\u4e94\u5206\u949f\u4e4b\u5185\uff08\u5b9e\u9645\u72b6\u6001\u4e3a5\uff09 -->\n<a href="javascript:;" data-type="refresh" class="fl mr20 buy-now buy-btn buy-refresh" data-state="4"><em>\u7acb\u5373\u5237\u65b0<i></i></em></a>\n<span class="countdown">{{=it.tip.start}}<span data-type="countdown">0\u65f60\u52060\u79d2</span></span>\n\n{{??}}\n<!-- \u5176\u4ed6\u60c5\u51b5 -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">\u7acb\u5373\u62a2\u8d2d</a>\n{{?}}'},function(t,e){t.exports='<div class="rush-process">\n    <p class="high">\u63d0\u4ea4\u6210\u529f\uff01</p>\n    <p>\u8ba2\u5355\u6b63\u5728\u521b\u5efa\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u54e6~</p>\n    <p><img src="http://s6.mogucdn.com/pic/141020/sp1ku_ieydszrrmvqtknbqmqytambqmeyde_14x14.gif"></p>\n</div>'},function(t,e,i){var n,a,s=i(4),o=i(44);n=[],a=function(){var t={$target:null,$container:null,itemId:null,moduleData:null,_initElem:function(){this.$target=$("#J_PreSaleRulesTarget")},_initData:function(){this.itemId=s.getItemId(),this.moduleData=s.getPreSaleRulesData()},_render:function(){if(null==this.$container){var t=MoGu.ui.getTemplate(o,this.moduleData);$("body").append(t),this.$container=$("#J_ModulePreSaleRules"),this._renderAfterEvents()}},_renderAfterEvents:function(){var t=this;this.$container.hover(function(){t.__isEnter=!0},function(){t.__isEnter=!1})},_showAfterEvents:function(){var t=this;$(window).off(".mpsr").on("resize.mpsr",function(){t._position()}),$("body").off(".mpsr").on("click.mpsr",function(){t.__isShow&&(t.__isEnter||t._toggle())})},_hideAfterEvents:function(){$(window).off(".mpsr"),$("body").off(".mpsr")},_toggle:function(){this.__isShow=!this.__isShow,this.__isShow?(this._render(),this.$container.show(),this._position(),this._showAfterEvents()):(this.$container.hide(),this._hideAfterEvents())},_position:function(){if(this.__isShow){var t=this.$target.offset();this.$container.css({top:t.top+25,left:t.left-300})}},_events:function(){var t=this;this.$target.off("click").on("click",function(){return t._toggle(),!1})},init:function(){s.getPageTypeIsItem()&&(this._initElem(),this._initData(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u6a21\u5757-\u9884\u552e\u5546\u54c1\u89c4\u5219 -->\n\n<div id="J_ModulePreSaleRules" class="module-presalerules">\n    \n    <!-- \u89c4\u5219\u76d2\u5b50 -->\n    <div class="rules-box">\n       \n        <!-- \u89c4\u5219logo -->\n        <div class="rules-logo">\n            <img src="{{=it.img}}" alt="">\n        </div>\n        \n        <!-- \u89c4\u5219\u7bad\u5934 -->\n        <em class="rules-arrow"><i></i></em>\n        \n        <!-- \u89c4\u5219\u5185\u5bb9 -->\n        <div class="rules-cont">\n            {{?it.rules && it.rules.length > 0}}\n            {{~it.rules: content}}\n            <div class="line">\n                {{=content}}\n            </div>\n            {{~}}\n            {{?}}\n        </div>\n\n    </div>\n</div>'},function(t,e,i){var n,a,s=i(4),o=i(46);n=[],a=function(){var t=window.M&&M.MWP||MoGu&&MoGu.MWP||window.MWP||null,e=0,i="",n=!0,a={moduleData:{__:{type:"",eventBanner:"",isLogin:!1,isWinning:!1,amount:""},winningBG:"http://s16.mogucdn.com/p1/160524/upload_ie4timjrhbtdaodchazdambqgqyde_557x339.png"},$buyCart:null,$tipContainer:null,$resultContainer:null,_initElem:function(){this.$buyCart=$("#J_BuyCart:visible")},_initData:function(){console.log("_initData");var e=this;this.moduleData=$.extend(!0,{},this.moduleData,{__:{isLogin:s.getLoginResult()}}),t&&t.request("mwp.darwin.multiget","3",{pids:24719}).then(function(n){n.ret===t.Code.Success&&n.data&&n.data[24719]&&n.data[24719].list[0]&&n.data[24719].list[0].addCartGetRedPackets&&(i=n.data[24719].list[0].addCartGetRedPackets,console.log("maita"),e._initEvents())})["catch"](function(){$.ajax({url:"http://mce.mogucdn.com/jsonp/multiget/3",type:"get",dataType:"jsonp",data:{pids:24719}}).done(function(t){t.success&&t.data&&t.data[24719]&&t.data[24719].list[0]&&t.data[24719].list[0].addCartGetRedPackets&&(i=t.data[24719].list[0].addCartGetRedPackets,console.log("maita"),e._initEvents())}).fail(function(){}).always(function(){})})},_initBgData:function(){console.log("\u521d\u59cb\u5316\u6570\u636e_initBgData");var i=this;this.moduleData=$.extend(!0,{},this.moduleData,{__:{isLogin:s.getLoginResult()}}),t&&t.request("mwp.darwin.multiget","3",{pids:24720}).then(function(n){if(n.ret===t.Code.Success&&shopId&&n.data&&n.data[24720]&&n.data[24720].list){var s=n.data[24720].list;s.length;s[0].image_pc&&(a.moduleData.winningBG=s[0].image_pc),i._resultShow(!0,e)}})["catch"](function(){$.ajax({url:"http://mce.mogucdn.com/jsonp/multiget/3",type:"get",dataType:"jsonp",data:{pids:24720}}).done(function(t){if(console.info(t),t.success&&shopId&&t.data&&t.data[24720]&&t.data[24720].list){var n=t.data[24720].list;n.length;n[0].image_pc&&(a.moduleData.winningBG=n[0].image_pc),i._resultShow(!0,e)}}).fail(function(){}).always(function(){})})},_initEvents:function(){console.log("_initEvents121");var t=this;this.$buyCart.on("cartluckydraw",function(e){console.log("\u52a0\u5165\u8d2d\u7269\u8f66\u540e"),t._joinCartAfter()})},_checkFirstVisitDetail:function(){var t=MoGu.util.getCookie("mogu_detail_ld_visit"),e=s.getUserId()+"-"+s.getFormatDate(new Date,"yyyy-MM-dd");return t!=e||s.getIsDebug()?(MoGu.util.setCookie("mogu_detail_ld_visit",e,{expires:2}),!0):!1},_checkFirstJoinCart:function(){var t=MoGu.util.getCookie("mogu_detail_ld_cart"),e=s.getUserId()+"-"+s.getFormatDate(new Date,"yyyy-MM-dd");return t!=e||s.getIsDebug()?(MoGu.util.setCookie("mogu_detail_ld_cart",e,{expires:2}),!0):!1},_tipRenderAfter:function(){function t(){var t=e.$buyCart.offset();e.$tipContainer.css({top:t.top-40,left:t.left})}var e=this;null!=e.$tipContainer&&(clearInterval(e._timer),e._sleep=0,e._timer=setInterval(function(){t(),e._sleep+=1,e._sleep>20&&clearInterval(e._timer)},500),$(window).off(".cld").on("resize.cld updatePosition.cld",function(){t()}),t())},_tipRender:function(){if(null==this.$tipContainer){var t=detailInfo.listBanner||{},e=t.eventBanner||null;if(console.log(detailInfo),e){this.moduleData.__.type="tip",this.moduleData.__.eventBanner=e;var i=MoGu.ui.getTemplate(o,this.moduleData);this.$buyCart.append(i),this.$tipContainer=$("#J_ModuleCartLuckyDrawTip"),$("#J_ModuleCartLuckyDrawTip").parent().parent()&&$("#J_ModuleCartLuckyDrawTip").parent().parent().css({height:"90px","padding-bottom":"10px"})}}},_tipShow:function(){0!=this.$buyCart.length&&s.getCartLuckyDrawData()&&s.getIsShowCartLuckyDrawTips()&&this._tipRender()},_resultPosition:function(){if(null!=this.$resultContainer){var t=$(window).scrollTop(),e=$(window).width(),i=$(window).height(),n=this.$resultContainer.width(),a=this.$resultContainer.height();this.$resultContainer.css({top:t+i/2-a/2,left:e/2-n/2})}},_resultRenderAfter:function(){var t=this;null!=t.$resultContainer&&($(window).off(".mcld").on("resize.mcld",function(){t._resultPosition()}),t.$resultContainer.on("click",".result-close,.result-goto",function(){t._resultHide()}))},_resultRender:function(){console.log("_resultRender"),this._resultHide(),this.moduleData.__.type="result";var t=MoGu.ui.getTemplate(o,this.moduleData);$("body").append(t),this.$resultContainer=$("#J_ModuleCartLuckyDrawResult"),this._resultRenderAfter()},_resultShow:function(t,e){console.log("_resultShow"),this.moduleData.__.isWinning=t,this.moduleData.__.amount=e,this._resultRender(),this._resultPosition()},_resultHide:function(){$(window).off(".mcld"),null!=this.$resultContainer&&(this.$resultContainer.remove(),this.$resultContainer=null,$("#J_ModuleCartLuckyDrawMask").remove())},_shopFav:function(){if(s.getLoginResult()){var t=$("#J_ShopFav"),e=t.hasClass("btn-faved"),i=t.data("shopid");e||t.data("__isAjaxFav")||(t.data("__isAjaxFav",!0),$.ajax({url:"/x6/shop/"+i+"/collectShop",type:"post",dataType:"json",data:null}).done(function(e){1001==e.status.code&&("\u53d6\u6d88\u6536\u85cf\u6210\u529f"===e.result?t.removeClass("btn-faved").addClass("btn-fav").html("\u6536\u85cf\u5e97\u94fa"):t.removeClass("btn-fav").addClass("btn-faved").html("\u5df2\u6536\u85cf")),t.data("__isAjaxFav",!1)}))}},_joinCartAfter:function(){if(console.log("_joinCartAfter",!s.getLoginResult()),s.getLoginResult()){var t=this;n&&($.ajax({url:"http://promotionnew.meilishuo.com/jsonp/playLottery/1",type:"get",dataType:"jsonp",data:{activityId:i}}).done(function(i){console.warn(i),i.success&&i.data&&i.data.win&&i.data.giftContent&&i.data.giftContent.money&&(e=i.data.giftContent.money||0,t._initBgData())}).fail(function(){}).always(function(){}),n=!1)}},init:function(){var t=this;console.log(!s.getPageTypeIsItem()),s.getPageTypeIsItem()&&(this._initElem(),this._initData(),this._initEvents(),t._tipShow())}};return a}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- \u6a21\u5757-\u52a0\u5165\u8d2d\u7269\u8f66\u62bd\u5956 -->\n\n{{?it.__.type == \'tip\'}}\n\n  <!-- \u52a0\u5165\u8d2d\u7269\u8f66\u767b\u5f55\u63d0\u793a -->    \n  {{?it.__.eventBanner.link}}\n  <a id="J_ModuleCartLuckyDrawTip" class="module-cartluckydraw-tip" style="background-image: url({{=it.__.eventBanner.icon}})" href="javascript:void(0);" target="_blank"></a>\n  {{??}}\n  <div id="J_ModuleCartLuckyDrawTip" class="module-cartluckydraw-tip" style="background-image: url({{=it.__.eventBanner.icon}})"></div>\n  {{?}}\n\n{{??it.__.type == \'result\'}}\n<!-- \u52a0\u5165\u8d2d\u7269\u8f66\u62bd\u5956\u7ed3\u679c -->    \n<div id="J_ModuleCartLuckyDrawResult" class="module-cartluckydraw-result">\n    <a class="result-close" href="javascript:;"></a>\n    <div class="result-price">\n      <em>\xa5</em><span>{{=it.__.amount}}</span>\n    </div>\n    <!-- <p class="result-draw-redpack">\u606d\u559c\u4f60\uff0c\u83b7\u5f97{{=it.__.amount}}\u5143\u7ea2\u5305\uff01</p> -->\n    <!-- <p class="result-draw-text">\u53ef\u524d\u5f80\u201c\u6211\u7684\u4f18\u60e0\u5238-616\u7ea2\u5305\u201d\u67e5\u770b\uff0c\u7ea2\u5305\u53ef\u4e0e\u5e73\u53f0\u4f18\u60e0\u5238\u52a0\u4f7f\u7528\u54e6</p> -->\n    <!-- <a class="result-goto" href="{{=it.couponPageLink}}" target="_blank"></a> -->\n    {{?it.__.amount}}\n      <p class="result-draw-redpack">\u606d\u559c\u4f60\uff0c\u83b7\u5f97{{=it.__.amount}}\u5143\u7ea2\u5305\uff01</p>\n      <p class="result-draw-text">\u8d62\u53d6\u7ea2\u5305\uff0c\u8fdb\u5165\u6211\u7684\u4f18\u60e0\u5238\u9875\u9762</p>\n    {{?}}\n    <!-- <a class="result-goto" href="{{=it.couponPageLink}}" target="_blank"></a> -->\n    <a class="result-goto" href="javascript:;">\u7ee7\u7eed\u901b\u901b></a>\n    <div class="result-draw-bg" style="background-image: url({{=it.winningBG}});"></div>\n</div>\n<!-- \u906e\u7f69\u5c42 -->\n<div id="J_ModuleCartLuckyDrawMask" class="module-cartluckydraw-mask"></div>\n{{?}}'}])}),"function"==typeof define&&define.amd&&require(["mls-pc/pages/normal/index"]);